"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[714],{8306:function(e,l,t){t.d(l,{Z:function(){return c}});var a=t(6252),i=t(3577);function s(e,l,t,s,d,n){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_add",style:(0,i.j5)({padding:e.size,backgroundColor:e.bgColor})},null,4)}var d=t(7830),n=(0,a.aZ)({name:"ActionAdd",props:{size:{type:String,default:"11px"},bgColor:{type:String,default:d.Z.themes.primary.plain[0]}}}),r=t(3744);const o=(0,r.Z)(n,[["render",s],["__scopeId","data-v-48dabb4f"]]);var c=o},1651:function(e,l,t){t.d(l,{Z:function(){return c}});var a=t(6252),i=t(3577);function s(e,l,t,s,d,n){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_close",style:(0,i.j5)({padding:e.size,backgroundColor:e.bgColor})},null,4)}var d=t(7830),n=(0,a.aZ)({name:"ActionClose",props:{size:{type:String,default:"11px"},bgColor:{type:String,default:d.Z.themes.danger.plain[0]}}}),r=t(3744);const o=(0,r.Z)(n,[["render",s],["__scopeId","data-v-88899c5c"]]);var c=o},7247:function(e,l,t){t.d(l,{Z:function(){return O}});var a=t(6252),i=t(3577),s=t(9963);const d=e=>((0,a.dD)("data-v-cf097554"),e=e(),(0,a.Cn)(),e),n={key:0,class:"wm-cascader_clear_body"},r=d((()=>(0,a._)("i",{class:"ui ui_arrow_down"},null,-1))),o=[r],c=["placeholder","value"],u={key:0,class:"wm-cascader_body flex"},h=d((()=>(0,a._)("span",{class:"wm-cascader_arrow"},null,-1))),m=d((()=>(0,a._)("li",null,"暂无数据",-1))),w=[m],p={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},_={key:0,class:"ui ui_arrow_right"},k=["onClick"],g={key:0,class:"ui ui_arrow_right"},v={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},f={key:0,class:"ui ui_arrow_right"},y=["onClick"],b={key:0,class:"ui ui_arrow_right"},x={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},C={key:0,class:"ui ui_arrow_right"},D=["onClick"],W={key:0,class:"ui ui_arrow_right"},U={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},Z={key:0,class:"ui ui_arrow_right"},S=["onClick"],L={key:0,class:"ui ui_arrow_right"};function H(e,l,t,d,r,m){return(0,a.wg)(),(0,a.iD)("div",{class:"wm-cascader",style:(0,i.j5)({width:e.width})},[(0,a._)("div",{class:"wm-cascader_input",style:(0,i.j5)({height:e.height,lineHeight:e.height}),onClick:l[1]||(l[1]=l=>e.show=!e.show)},[e.value.length>0&&e.clearable?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("span",{class:"wm-cascader_clear",onClick:l[0]||(l[0]=(0,s.iM)((l=>e.clear()),["stop"]))})])):(0,a.kq)("",!0),(0,a._)("div",{class:"wm-cascader_input_ico",style:(0,i.j5)({transform:e.show?"rotate(-180deg)":"rotate(0deg)"})},o,4),(0,a._)("input",{type:"text",readonly:"",placeholder:e.placeholder,value:e.text,style:(0,i.j5)({borderColor:e.show?"#6FB737":"",boxShadow:e.show?"0 0 4px rgba(0,0,0,.1)":""})},null,12,c)],4),e.show?((0,a.wg)(),(0,a.iD)("div",u,[h,0==e.dataList.length?((0,a.wg)(),(0,a.iD)("ul",{key:0,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},w,4)):((0,a.wg)(),(0,a.iD)("ul",{key:1,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList,((l,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},[l.disabled?((0,a.wg)(),(0,a.iD)("li",p,[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",_)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(l.checked?"wm-cascader_active":""),onClick:(0,s.iM)((l=>e.selectClick("1",[t,-1,-1,-1])),["stop"])},[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",g)):(0,a.kq)("",!0)],10,k))],64)))),128))],4)),e.k1>=0&&e.dataList[e.k1].children?((0,a.wg)(),(0,a.iD)("ul",{key:2,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList[e.k1].children,((l,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},[l.disabled?((0,a.wg)(),(0,a.iD)("li",v,[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",f)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(l.checked?"wm-cascader_active":""),onClick:l=>e.selectClick("2",[e.k1,t,-1,-1])},[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",b)):(0,a.kq)("",!0)],10,y))],64)))),128))],4)):(0,a.kq)("",!0),e.k2>=0&&e.dataList[e.k1].children[e.k2].children?((0,a.wg)(),(0,a.iD)("ul",{key:3,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList[e.k1].children[e.k2].children,((l,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},[l.disabled?((0,a.wg)(),(0,a.iD)("li",x,[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",C)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(l.checked?"wm-cascader_active":""),onClick:l=>e.selectClick("3",[e.k1,e.k2,t,-1])},[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",W)):(0,a.kq)("",!0)],10,D))],64)))),128))],4)):(0,a.kq)("",!0),e.k3>=0&&e.dataList[e.k1].children[e.k2].children[e.k3].children?((0,a.wg)(),(0,a.iD)("ul",{key:4,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList[e.k1].children[e.k2].children[e.k3].children,((l,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},[l.disabled?((0,a.wg)(),(0,a.iD)("li",U,[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",Z)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(l.checked?"wm-cascader_active":""),onClick:l=>e.selectClick("4",[e.k1,e.k2,e.k3,t])},[(0,a._)("span",null,(0,i.zw)(l.label),1),l.children?((0,a.wg)(),(0,a.iD)("i",L)):(0,a.kq)("",!0)],10,S))],64)))),128))],4)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],4)}const z=(e,l)=>l.split(e),I=(e,l="\\s")=>{const t=new RegExp("("+l+"*$)","gi");return e.replace(t,"")};var q=(0,a.aZ)({name:"Cascader",props:{value:{type:Array,default:[]},data:{type:Array,default:[]},width:{type:String,default:"100%"},height:{type:String,default:"40px"},placeholder:{type:String,default:"请选择"},maxWidth:{type:String,default:"180px"},maxHeight:{type:String,default:"180px"},clearable:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1}},data(){const e=!1,l="",t=[],a=null;let i=-1,s=-1,d=-1,n=-1;return{show:e,text:l,keys:t,dataList:a,k1:i,k2:s,k3:d,k4:n}},watch:{value(e){const l=e.length;l>0&&(this.k1=e[0],this.selectChechked(e[0],this.dataList)),l>1&&(this.k2=e[1],this.selectChechked(e[1],this.dataList[e[0]].children)),l>2&&(this.k3=e[2],this.selectChechked(e[2],this.dataList[e[0]].children[e[1]].children)),l>3&&(this.k4=e[3],this.selectChechked(e[3],this.dataList[e[0]].children[e[1]].children[e[2]].children)),this.getValue()},data(e){this.dataList=e}},mounted(){this.dataList=this.data;const e=document.getElementsByClassName("wm-cascader");for(let l=0;l<e.length;l++)e[l].addEventListener("click",(e=>{e.stopPropagation()}));document.addEventListener("click",(()=>{this.show=!1}))},methods:{selectClick(e,l){this.k1=l[0],this.k2=l[1],this.k3=l[2],this.k4=l[3];const t=this.dataList;"1"==e?this.selectRouter(this.k1,t):"2"==e?this.selectRouter(this.k2,t[this.k1].children):"3"==e?this.selectRouter(this.k3,t[this.k1].children[this.k2].children):"4"==e&&this.selectRouter(this.k4,t[this.k1].children[this.k2].children[this.k3].children)},selectRouter(e,l){for(let t in l)t==e?(l[t].checked=!0,this.checkStrictly?l[e].children&&this.selectClear(l[e].children):l[e].children||(this.show=!1),this.getValue(),setTimeout((()=>{this.$emit("update:value",this.keys)}),400)):(l[t].checked=!1,l[t].children&&this.selectClear(l[t].children))},selectChechked(e,l){for(let t in l)l[t].checked=t==e},selectClear(e){for(let l in e)e[l].checked=!1,e[l].children&&this.selectClear(e[l].children)},getValue(){let e=this.selectValue(this.dataList);this.text=I(e.label,"/"),e.key&&(this.keys=z("/",I(e.key,"/")))},selectValue(e){let l="",t="",a="",i={};for(let s in e)if(e[s].checked){l=s,t=e[s].label,a=e[s].value,e[s].children&&(i=this.selectValue(e[s].children),l+="/"+i["key"],t+="/"+i["label"],a+="/"+i["value"]);break}return{key:l,label:t,value:a}},clear(){this.k1=-1,this.k2=-1,this.k3=-1,this.k4=-1,this.text="",this.$emit("update:value",[]),this.selectClear(this.dataList)}}}),R=t(3744);const A=(0,R.Z)(q,[["render",H],["__scopeId","data-v-cf097554"]]);var O=A},4737:function(e,l,t){t.r(l),t.d(l,{default:function(){return ze}});var a=t(6252),i=t(9963),s=t(3577);const d=e=>((0,a.dD)("data-v-38b6c0af"),e=e(),(0,a.Cn)(),e),n={class:"flex"},r={class:"app_ct_left"},o={class:"app_action_body flex_left"},c=d((()=>(0,a._)("i",{class:"ui ui_search"},null,-1))),u=[c],h={class:"app_action_list flex_left"},m={class:"app_ct_body"},w={width:"40"},p=(0,a.Uk)("ID"),_={width:"40"},k=(0,a.Uk)("FID"),g=(0,a.Uk)("名称"),v=(0,a.Uk)("英文"),f=d((()=>(0,a._)("td",{width:"40",class:"tCenter"},"图标",-1))),y={width:"140"},b=(0,a.Uk)("创建时间"),x={width:"140"},C=(0,a.Uk)("更新时间"),D=d((()=>(0,a._)("td",{width:"60",class:"tCenter"},"排序",-1))),W=d((()=>(0,a._)("td",{width:"60",class:"tCenter"},"权限",-1))),U=(0,a.Uk)("URL"),Z=(0,a.Uk)("API"),S={width:"30",class:"checkbox wm-table_checkbox"},L={class:"tCenter"},H={key:0,class:"menus_icon"},z={key:1},I={class:"tCenter"},q={class:"tCenter"},R=(0,a.Uk)("设置"),A=(0,a.Uk)("编辑"),O={key:2},j=d((()=>(0,a._)("td",{class:"lable"},"所属",-1))),B=d((()=>(0,a._)("td",{class:"lable"},"名称",-1))),P=d((()=>(0,a._)("td",{class:"lable"},"英文",-1))),Y=d((()=>(0,a._)("td",{class:"lable"},"URL",-1))),F=d((()=>(0,a._)("td",{class:"lable"},"API",-1))),K=d((()=>(0,a._)("td",{class:"lable"},"图标样式",-1))),M=d((()=>(0,a._)("td",{class:"lable"},"排序",-1))),T=(0,a.Uk)("添 加"),V=d((()=>(0,a._)("td",{class:"lable"},"所属",-1))),E=d((()=>(0,a._)("td",{class:"lable"},"名称",-1))),N=d((()=>(0,a._)("td",{class:"lable"},"英文",-1))),J=d((()=>(0,a._)("td",{class:"lable"},"URL",-1))),$=d((()=>(0,a._)("td",{class:"lable"},"API",-1))),G=d((()=>(0,a._)("td",{class:"lable"},"图标样式",-1))),Q=d((()=>(0,a._)("td",{class:"lable"},"排序",-1))),X=(0,a.Uk)("保 存"),ee=(0,a.Uk)("是否删除已选择数据？"),le=(0,a.Uk)("彻底删除"),te=d((()=>(0,a._)("td",null,"名称",-1))),ae=d((()=>(0,a._)("td",null,"动作",-1))),ie=d((()=>(0,a._)("td",{width:"100"},"权限",-1))),se={width:"30"},de={class:"perm_an"},ne={class:"perm_an"},re=(0,a.Uk)("更 新");function oe(e,l,t,d,c,oe){const ce=(0,a.up)("wm-input"),ue=(0,a.up)("wm-search"),he=(0,a.up)("wm-table-order"),me=(0,a.up)("wm-checkbox"),we=(0,a.up)("wm-button"),pe=(0,a.up)("wm-table"),_e=(0,a.up)("wm-page"),ke=(0,a.up)("wm-main"),ge=(0,a.up)("wm-cascader"),ve=(0,a.up)("wm-table-form"),fe=(0,a.up)("wm-dialog"),ye=(0,a.up)("wm-row"),be=(0,a.up)("wm-add"),xe=(0,a.up)("wm-close");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.wy)((0,a._)("div",r,[(0,a.Wm)(ue,{show:e.sea.show,"onUpdate:show":l[4]||(l[4]=l=>e.sea.show=l),"onUpdate:submit":l[5]||(l[5]=l=>e.subSea())},{default:(0,a.w5)((()=>[(0,a._)("li",null,[(0,a.Wm)(ce,{value:e.sea.form.fid,"onUpdate:value":l[0]||(l[0]=l=>e.sea.form.fid=l),placeholder:"FID",clearable:""},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(ce,{value:e.sea.form.title,"onUpdate:value":l[1]||(l[1]=l=>e.sea.form.title=l),placeholder:"菜单名称",clearable:""},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(ce,{value:e.sea.form.en,"onUpdate:value":l[2]||(l[2]=l=>e.sea.form.en=l),placeholder:"英文名称",clearable:""},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(ce,{value:e.sea.form.url,"onUpdate:value":l[3]||(l[3]=l=>e.sea.form.url=l),placeholder:"API关键字",clearable:""},null,8,["value"])])])),_:1},8,["show"])],512),[[i.F8,e.sea.show]]),(0,a._)("div",{class:"app_ct_right",style:(0,s.j5)({width:e.sea.show?"calc(100% - 240px)":"100%"})},[(0,a._)("div",o,[(0,a.wy)((0,a._)("div",{class:"app_action_sea",onClick:l[6]||(l[6]=l=>e.sea.show=!0)},u,512),[[i.F8,!e.sea.show]]),(0,a._)("ul",h,[e.getters.actionShow("add")?((0,a.wg)(),(0,a.iD)("li",{key:0,onClick:l[7]||(l[7]=l=>e.add.show=!0)},"添加")):(0,a.kq)("",!0),e.getters.actionShow("edit")?((0,a.wg)(),(0,a.iD)("li",{key:1,onClick:l[8]||(l[8]=l=>e.editData())},"编辑")):(0,a.kq)("",!0),e.getters.actionShow("del")?((0,a.wg)(),(0,a.iD)("li",{key:2,onClick:l[9]||(l[9]=l=>e.delData())},"删除")):(0,a.kq)("",!0)])]),(0,a._)("div",m,[(0,a.Wm)(ke,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pe,{ref:"Table",data:e.page.list,style:{"min-width":"1300px"}},{title:(0,a.w5)((()=>[(0,a._)("td",w,[p,(0,a.Wm)(he,{value:e.oby.list.id,"onUpdate:value":l[10]||(l[10]=l=>e.OrderBy("id",l))},null,8,["value"])]),(0,a._)("td",_,[k,(0,a.Wm)(he,{value:e.oby.list.fid,"onUpdate:value":l[11]||(l[11]=l=>e.OrderBy("fid",l))},null,8,["value"])]),(0,a._)("td",null,[g,(0,a.Wm)(he,{value:e.oby.list.title,"onUpdate:value":l[12]||(l[12]=l=>e.OrderBy("title",l))},null,8,["value"])]),(0,a._)("td",null,[v,(0,a.Wm)(he,{value:e.oby.list.en,"onUpdate:value":l[13]||(l[13]=l=>e.OrderBy("en",l))},null,8,["value"])]),f,(0,a._)("td",y,[b,(0,a.Wm)(he,{value:e.oby.list.ctime,"onUpdate:value":l[14]||(l[14]=l=>e.OrderBy("ctime",l))},null,8,["value"])]),(0,a._)("td",x,[C,(0,a.Wm)(he,{value:e.oby.list.utime,"onUpdate:value":l[15]||(l[15]=l=>e.OrderBy("utime",l))},null,8,["value"])]),D,W,(0,a._)("td",null,[U,(0,a.Wm)(he,{value:e.oby.list.url,"onUpdate:value":l[16]||(l[16]=l=>e.OrderBy("url",l))},null,8,["value"])]),(0,a._)("td",null,[Z,(0,a.Wm)(he,{value:e.oby.list.controller,"onUpdate:value":l[17]||(l[17]=l=>e.OrderBy("controller",l))},null,8,["value"])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.page.list,((l,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",S,[(0,a.Wm)(me,{value:l.id},null,8,["value"])]),(0,a._)("td",null,(0,s.zw)(l.id),1),(0,a._)("td",null,(0,s.zw)(l.fid),1),(0,a._)("td",null,[(0,a._)("b",null,(0,s.zw)(l.title),1)]),(0,a._)("td",null,(0,s.zw)(l.en),1),(0,a._)("td",L,[l.ico?((0,a.wg)(),(0,a.iD)("span",H,[(0,a._)("i",{class:(0,s.C_)(l.ico)},null,2)])):((0,a.wg)(),(0,a.iD)("span",z,"-"))]),(0,a._)("td",null,(0,s.zw)(l.ctime),1),(0,a._)("td",null,(0,s.zw)(l.utime),1),(0,a._)("td",I,(0,s.zw)(l.sort),1),(0,a._)("td",q,[e.getters.actionShow("perm")&&l.controller&&!l.action?((0,a.wg)(),(0,a.j4)(we,{key:0,type:"text",textColor:"danger",onClick:t=>e.permData(l.id,l.title,l.controller,l.action)},{default:(0,a.w5)((()=>[R])),_:2},1032,["onClick"])):e.getters.actionShow("perm")&&l.controller&&l.action?((0,a.wg)(),(0,a.j4)(we,{key:1,type:"text",onClick:t=>e.permData(l.id,l.title,l.controller,l.action)},{default:(0,a.w5)((()=>[A])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.iD)("span",O,"-"))]),(0,a._)("td",null,(0,s.zw)(l.url),1),(0,a._)("td",null,(0,s.zw)(l.controller),1)])))),128))])),_:1},8,["data"]),(0,a.Wm)(_e,{page:e.page.page,limit:e.page.limit,total:e.page.total,"onUpdate:page":e.subPage},null,8,["page","limit","total","onUpdate:page"])])),_:1})])],4),(0,a.Wm)(fe,{title:"添加",width:"700px",show:e.add.show,"onUpdate:show":l[26]||(l[26]=l=>e.add.show=l)},{footer:(0,a.w5)((()=>[(0,a.Wm)(we,{onClick:l[25]||(l[25]=l=>e.subAdd())},{default:(0,a.w5)((()=>[T])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ve,null,{default:(0,a.w5)((()=>[(0,a._)("tr",null,[j,(0,a._)("td",null,[(0,a.Wm)(ge,{width:"240px",value:e.menus.value,"onUpdate:value":l[18]||(l[18]=l=>e.menus.value=l),data:e.menus.data,checkStrictly:"",clearable:""},null,8,["value","data"])])]),(0,a._)("tr",null,[B,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.add.form.title,"onUpdate:value":l[19]||(l[19]=l=>e.add.form.title=l),maxlength:"8",maxWidth:"80%",placeholder:"菜单名称",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[P,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.add.form.en,"onUpdate:value":l[20]||(l[20]=l=>e.add.form.en=l),maxlength:"16",maxWidth:"80%",placeholder:"英文名称",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[Y,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.add.form.url,"onUpdate:value":l[21]||(l[21]=l=>e.add.form.url=l),maxlength:"24",maxWidth:"80%",placeholder:"URL",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[F,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.add.form.controller,"onUpdate:value":l[22]||(l[22]=l=>e.add.form.controller=l),maxlength:"64",maxWidth:"80%",placeholder:"例如: /admin/sys_menus",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[K,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.add.form.ico,"onUpdate:value":l[23]||(l[23]=l=>e.add.form.ico=l),maxlength:"32",maxWidth:"80%",placeholder:"图标样式",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[M,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.add.form.sort,"onUpdate:value":l[24]||(l[24]=l=>e.add.form.sort=l),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])])])),_:1})])),_:1},8,["show"]),(0,a.Wm)(fe,{title:"编辑",width:"700px",show:e.edit.show,"onUpdate:show":l[35]||(l[35]=l=>e.edit.show=l)},{footer:(0,a.w5)((()=>[(0,a.Wm)(we,{onClick:l[34]||(l[34]=l=>e.subEdit())},{default:(0,a.w5)((()=>[X])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ve,null,{default:(0,a.w5)((()=>[(0,a._)("tr",null,[V,(0,a._)("td",null,[(0,a.Wm)(ge,{width:"240px",value:e.menus.value,"onUpdate:value":l[27]||(l[27]=l=>e.menus.value=l),data:e.menus.data,checkStrictly:"",clearable:""},null,8,["value","data"])])]),(0,a._)("tr",null,[E,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.edit.form.title,"onUpdate:value":l[28]||(l[28]=l=>e.edit.form.title=l),maxlength:"8",maxWidth:"80%",placeholder:"菜单名称",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[N,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.edit.form.en,"onUpdate:value":l[29]||(l[29]=l=>e.edit.form.en=l),maxlength:"16",maxWidth:"80%",placeholder:"英文名称",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[J,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.edit.form.url,"onUpdate:value":l[30]||(l[30]=l=>e.edit.form.url=l),maxlength:"24",maxWidth:"80%",placeholder:"URL",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[$,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.edit.form.controller,"onUpdate:value":l[31]||(l[31]=l=>e.edit.form.controller=l),maxlength:"64",maxWidth:"80%",placeholder:"例如: /admin/sys_menus",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[G,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.edit.form.ico,"onUpdate:value":l[32]||(l[32]=l=>e.edit.form.ico=l),maxlength:"32",maxWidth:"80%",placeholder:"图标样式",clearable:""},null,8,["value"])])]),(0,a._)("tr",null,[Q,(0,a._)("td",null,[(0,a.Wm)(ce,{value:e.edit.form.sort,"onUpdate:value":l[33]||(l[33]=l=>e.edit.form.sort=l),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])])])),_:1})])),_:1},8,["show"]),(0,a.Wm)(fe,{title:"删除",width:"360px",show:e.del.show,"onUpdate:show":l[37]||(l[37]=l=>e.del.show=l)},{footer:(0,a.w5)((()=>[(0,a.Wm)(we,{onClick:l[36]||(l[36]=l=>e.subDel())},{default:(0,a.w5)((()=>[le])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ye,null,{default:(0,a.w5)((()=>[ee])),_:1})])),_:1},8,["show"]),(0,a.Wm)(fe,{width:"640px",title:e.perm.title,show:e.perm.show,"onUpdate:show":l[40]||(l[40]=l=>e.perm.show=l)},{footer:(0,a.w5)((()=>[(0,a.Wm)(we,{onClick:l[39]||(l[39]=l=>e.subPerm())},{default:(0,a.w5)((()=>[re])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(pe,{isCheckbox:!1},{title:(0,a.w5)((()=>[te,ae,ie,(0,a._)("td",se,[(0,a._)("div",de,[(0,a.Wm)(be,{onClick:l[38]||(l[38]=l=>e.permAdd())})])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.perm.list,((l,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,[(0,a.Wm)(ce,{value:l.name,"onUpdate:value":e=>l.name=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(ce,{value:l.action,"onUpdate:value":e=>l.action=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(ce,{value:l.perm,"onUpdate:value":e=>l.perm=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a._)("div",ne,[(0,a.Wm)(xe,{onClick:l=>e.permRemove(t)},null,8,["onClick"])])])])))),128))])),_:1})])),_:1},8,["title","show"])])}var ce=t(3907),ue=t(8907),he=t(6492),me=t(5783),we=t(2367),pe=t(8408),_e=t(6448),ke=t(1566),ge=t(4688),ve=t(4598),fe=t(3098),ye=t(2458),be=t(5171),xe=t(8306),Ce=t(1651),De=t(7953),We=t(8650),Ue=t(7247),Ze=t(1326),Se=(0,a.aZ)({components:{wmSearch:pe.Z,wmMain:_e.Z,wmRow:ke.Z,wmTable:ge.Z,wmTableForm:ve.Z,wmTableOrder:fe.Z,wmCheckbox:ye.Z,wmDialog:be.Z,wmAdd:xe.Z,wmClose:Ce.Z,wmInput:De.Z,wmButton:We.Z,wmCascader:Ue.Z,wmPage:Ze.Z},data(){const e=(0,ce.oR)(),l=e.state,t=e.getters,a={list:[],page:1,limit:20,total:0},i={show:!1,form:{}},s={name:"",list:{id:"",fid:"",title:"",en:"",ctime:"",utime:"",url:"",controller:""}},d={show:!1,form:{}},n={show:!1,id:"",form:{}},r={show:!1,ids:""},o={show:!1,id:"",title:"权限",list:[]};let c=[];const u={value:[],data:[]};return{state:l,getters:t,page:a,sea:i,oby:s,add:d,edit:n,del:r,perm:o,keys:c,menus:u}},mounted(){we.Z.getItem("token")&&(this.loadData(),this.getMenus())},methods:{loadData(){this.page.list=[],this.page.total=0;const e=(0,ue.Z)();(0,me.Z)("sys_menus/list",{token:we.Z.getItem("token"),page:this.page.page,limit:this.page.limit,data:JSON.stringify(this.sea.form),order:this.oby.name},(l=>{e.clear();const t=l.data;if(0!=t.code)return(0,he.Z)(t.msg);this.page.list=t.list,this.page.total=t.total}))},subPage(e){this.page.page=e,this.loadData()},subSea(){this.page.page=1,this.loadData()},OrderBy(e,l){for(let t in this.oby.list)this.oby.list[t]=t==e?l:"";this.oby.name=l?e+" "+l:"",this.loadData()},verify(e){return!e.title||e.title.length<2?"名称大于2个字符":""},subAdd(){const e=this.add.form;e.fid=this.getFid();let l=this.verify(e);if(l)return(0,he.Z)(l);this.add.show=!1;const t=(0,ue.Z)();(0,me.Z)("sys_menus/add",{token:we.Z.getItem("token"),data:JSON.stringify(e)},(e=>{t.clear();const l=e.data;return 0===l.code&&(this.loadData(),this.getMenus()),(0,he.Z)(l.msg)}))},editData(){const e=this.$refs.Table,l=e.getRow();if(!l)return(0,he.Z)("请选择数据!");this.edit.show=!0,this.edit.id=l.id,this.edit.form.fid=l.fid,this.edit.form.title=l.title,this.edit.form.en=l.en,this.edit.form.url=l.url,this.edit.form.ico=l.ico,this.edit.form.sort=l.sort,this.edit.form.controller=l.controller,this.editKeys()},editKeys(){const e=this.edit.form.fid,l=this.menus.data;let t=[];if(0!=e)for(let a in l){if(e==l[a].value){t=[a];break}if(l[a].children)for(let i in l[a].children){if(e==l[a].children[i].value){t=[a,i];break}if(l[a].children[i].children)for(let s in l[a].children[i].children){if(e==l[a].children[i].children[s].value){t=[a,i,s];break}if(l[a].children[i].children[s].children)for(let d in l[a].children[i].children[s].children)if(e==l[a].children[i].children[s].children[d].value){t=[a,i,s,d];break}}}}this.menus.value=t},subEdit(){const e=this.edit.form;e.fid=this.getFid();let l=this.verify(e);if(l)return(0,he.Z)(l);this.edit.show=!1;const t=(0,ue.Z)();(0,me.Z)("sys_menus/edit",{token:we.Z.getItem("token"),id:this.edit.id,data:JSON.stringify(e)},(e=>{t.clear();const l=e.data;return 0===l.code&&(this.loadData(),this.getMenus()),(0,he.Z)(l.msg)}))},delData(){const e=this.$refs.Table,l=e.getVals();if(!l)return(0,he.Z)("请选择数据!");this.del.show=!0,this.del.ids=JSON.stringify(l)},subDel(){this.del.show=!1;const e=(0,ue.Z)();(0,me.Z)("sys_menus/del",{token:we.Z.getItem("token"),data:this.del.ids},(l=>{e.clear();const t=l.data;return 0===t.code&&this.loadData(),(0,he.Z)(t.msg)}))},getMenus(){(0,me.Z)("sys_menus/getMenusAll",{token:we.Z.getItem("token"),data:this.del.ids},(e=>{const l=e.data;0===l.code&&(this.menus.data=l.menus)}))},getFid(){let e=0;const l=this.menus.value,t=l.length,a=this.menus.data;return 1==t&&(e=a[l[0]].value),2==t&&(e=a[l[0]].children[l[1]].value),3==t&&(e=a[l[0]].children[l[1]].children[l[2]].value),4==t&&(e=a[l[0]].children[l[1]].children[l[2]].children[l[3]].value),e},permData(e,l,t,a){this.perm.show=!0,this.perm.id=e,this.perm.title=l+": "+t,this.perm.list=a},subPerm(){const e=this.perm.list,l=[];for(let a in e)e[a].action&&e[a].perm&&l.push(e[a]);this.perm.list=l,this.perm.show=!1;const t=(0,ue.Z)();(0,me.Z)("sys_menus/perm",{token:we.Z.getItem("token"),id:this.perm.id,data:JSON.stringify(l)},(e=>{t.clear();const l=e.data;return 0===l.code&&this.loadData(),(0,he.Z)(l.msg)}))},permAdd(){const e=this.perm.list;e.length>0?e.push({name:"",action:"",perm:2*e[e.length-1].perm}):this.perm.list=[{name:"",action:"",perm:1}]},permRemove(e){const l=this.perm.list;l.splice(e,1)}}}),Le=t(3744);const He=(0,Le.Z)(Se,[["render",oe],["__scopeId","data-v-38b6c0af"]]);var ze=He}}]);