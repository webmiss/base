"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[425],{8306:function(t,e,l){l.d(e,{Z:function(){return u}});var a=l(6252),d=l(3577);function o(t,e,l,o,i,s){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_add",style:(0,d.j5)({padding:t.size,backgroundColor:t.bgColor})},null,4)}var i=l(7830),s=(0,a.aZ)({name:"ActionAdd",props:{size:{type:String,default:"11px"},bgColor:{type:String,default:i.Z.themes.primary.plain[0]}}}),n=l(3744);const r=(0,n.Z)(s,[["render",o],["__scopeId","data-v-48dabb4f"]]);var u=r},1651:function(t,e,l){l.d(e,{Z:function(){return u}});var a=l(6252),d=l(3577);function o(t,e,l,o,i,s){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_close",style:(0,d.j5)({padding:t.size,backgroundColor:t.bgColor})},null,4)}var i=l(7830),s=(0,a.aZ)({name:"ActionClose",props:{size:{type:String,default:"11px"},bgColor:{type:String,default:i.Z.themes.danger.plain[0]}}}),n=l(3744);const r=(0,n.Z)(s,[["render",o],["__scopeId","data-v-88899c5c"]]);var u=r},1016:function(t,e,l){l.r(e),l.d(e,{default:function(){return Ct}});var a=l(6252),d=l(9963),o=l(3577);const i=t=>((0,a.dD)("data-v-4a14ddd9"),t=t(),(0,a.Cn)(),t),s={class:"flex"},n={class:"app_ct_left"},r={class:"app_action_body flex_left"},u=i((()=>(0,a._)("i",{class:"ui ui_search"},null,-1))),m=[u],p={class:"app_action_list flex_left"},c={class:"app_ct_body"},h={width:"40"},w=(0,a.Uk)("ID"),_={width:"40"},f=(0,a.Uk)("FID"),v=(0,a.Uk)("名称"),g=i((()=>(0,a._)("td",{width:"40",class:"tCenter"},"图标",-1))),b={width:"140"},k=(0,a.Uk)("创建时间"),U={width:"140"},W=(0,a.Uk)("更新时间"),x=i((()=>(0,a._)("td",{width:"60",class:"tCenter"},"排序",-1))),y=i((()=>(0,a._)("td",{width:"60",class:"tCenter"},"权限",-1))),Z=(0,a.Uk)("URL"),D=(0,a.Uk)("API"),C={width:"30",class:"checkbox wm-table_checkbox"},I={class:"tCenter"},S={key:0,class:"menus_icon"},O={key:1},z={class:"tCenter"},A={class:"tCenter"},R=(0,a.Uk)("设置"),B=(0,a.Uk)("编辑"),F={key:2},P=i((()=>(0,a._)("td",{class:"lable"},"所属",-1))),T=i((()=>(0,a._)("td",{class:"lable"},"名称",-1))),j=i((()=>(0,a._)("td",{class:"lable"},"控制器",-1))),J=i((()=>(0,a._)("td",{class:"lable"},"URL",-1))),L=i((()=>(0,a._)("td",{class:"lable"},"图标样式",-1))),N=i((()=>(0,a._)("td",{class:"lable"},"排序",-1))),q=(0,a.Uk)("添 加"),E=i((()=>(0,a._)("td",{class:"lable"},"所属",-1))),H=i((()=>(0,a._)("td",{class:"lable"},"名称",-1))),K=i((()=>(0,a._)("td",{class:"lable"},"控制器",-1))),Y=i((()=>(0,a._)("td",{class:"lable"},"URL",-1))),$=i((()=>(0,a._)("td",{class:"lable"},"图标样式",-1))),M=i((()=>(0,a._)("td",{class:"lable"},"排序",-1))),V=(0,a.Uk)("保 存"),G=(0,a.Uk)("是否删除已选择数据？"),Q=(0,a.Uk)("彻底删除"),X=i((()=>(0,a._)("td",null,"名称",-1))),tt=i((()=>(0,a._)("td",null,"动作",-1))),et=i((()=>(0,a._)("td",{width:"100"},"权限",-1))),lt={width:"30"},at={class:"perm_an"},dt={class:"perm_an"},ot=(0,a.Uk)("更 新");function it(t,e,l,i,u,it){const st=(0,a.up)("wm-input"),nt=(0,a.up)("wm-search"),rt=(0,a.up)("wm-table-order"),ut=(0,a.up)("wm-checkbox"),mt=(0,a.up)("wm-button"),pt=(0,a.up)("wm-table"),ct=(0,a.up)("wm-page"),ht=(0,a.up)("wm-main"),wt=(0,a.up)("wm-table-form"),_t=(0,a.up)("wm-dialog"),ft=(0,a.up)("wm-row"),vt=(0,a.up)("wm-add"),gt=(0,a.up)("wm-close");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.wy)((0,a._)("div",n,[(0,a.Wm)(nt,{show:t.sea.show,"onUpdate:show":e[3]||(e[3]=e=>t.sea.show=e),"onUpdate:submit":e[4]||(e[4]=e=>t.subSea())},{default:(0,a.w5)((()=>[(0,a._)("li",null,[(0,a.Wm)(st,{value:t.sea.form.fid,"onUpdate:value":e[0]||(e[0]=e=>t.sea.form.fid=e),placeholder:"FID",clearable:""},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(st,{value:t.sea.form.title,"onUpdate:value":e[1]||(e[1]=e=>t.sea.form.title=e),placeholder:"菜单名称",clearable:""},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(st,{value:t.sea.form.url,"onUpdate:value":e[2]||(e[2]=e=>t.sea.form.url=e),placeholder:"API关键字",clearable:""},null,8,["value"])])])),_:1},8,["show"])],512),[[d.F8,t.sea.show]]),(0,a._)("div",{class:"app_ct_right",style:(0,o.j5)({width:t.sea.show?"calc(100% - 240px)":"100%"})},[(0,a._)("div",r,[(0,a.wy)((0,a._)("div",{class:"app_action_sea",onClick:e[5]||(e[5]=e=>t.sea.show=!0)},m,512),[[d.F8,!t.sea.show]]),(0,a._)("ul",p,[t.getters.actionShow("add")?((0,a.wg)(),(0,a.iD)("li",{key:0,onClick:e[6]||(e[6]=e=>t.add.show=!0)},"添加")):(0,a.kq)("",!0),t.getters.actionShow("edit")?((0,a.wg)(),(0,a.iD)("li",{key:1,onClick:e[7]||(e[7]=e=>t.editData())},"编辑")):(0,a.kq)("",!0),t.getters.actionShow("del")?((0,a.wg)(),(0,a.iD)("li",{key:2,onClick:e[8]||(e[8]=e=>t.delData())},"删除")):(0,a.kq)("",!0)])]),(0,a._)("div",c,[(0,a.Wm)(ht,null,{default:(0,a.w5)((()=>[(0,a.Wm)(pt,{ref:"Table",data:t.page.list,style:{"min-width":"1080px"}},{title:(0,a.w5)((()=>[(0,a._)("td",h,[w,(0,a.Wm)(rt,{value:t.oby.list.id,"onUpdate:value":e[9]||(e[9]=e=>t.OrderBy("id",e))},null,8,["value"])]),(0,a._)("td",_,[f,(0,a.Wm)(rt,{value:t.oby.list.fid,"onUpdate:value":e[10]||(e[10]=e=>t.OrderBy("fid",e))},null,8,["value"])]),(0,a._)("td",null,[v,(0,a.Wm)(rt,{value:t.oby.list.title,"onUpdate:value":e[11]||(e[11]=e=>t.OrderBy("title",e))},null,8,["value"])]),g,(0,a._)("td",b,[k,(0,a.Wm)(rt,{value:t.oby.list.ctime,"onUpdate:value":e[12]||(e[12]=e=>t.OrderBy("ctime",e))},null,8,["value"])]),(0,a._)("td",U,[W,(0,a.Wm)(rt,{value:t.oby.list.utime,"onUpdate:value":e[13]||(e[13]=e=>t.OrderBy("utime",e))},null,8,["value"])]),x,y,(0,a._)("td",null,[Z,(0,a.Wm)(rt,{value:t.oby.list.url,"onUpdate:value":e[14]||(e[14]=e=>t.OrderBy("url",e))},null,8,["value"])]),(0,a._)("td",null,[D,(0,a.Wm)(rt,{value:t.oby.list.controller,"onUpdate:value":e[15]||(e[15]=e=>t.OrderBy("controller",e))},null,8,["value"])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.page.list,((e,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",C,[(0,a.Wm)(ut,{value:e.id},null,8,["value"])]),(0,a._)("td",null,(0,o.zw)(e.id),1),(0,a._)("td",null,(0,o.zw)(e.fid),1),(0,a._)("td",null,[(0,a._)("b",null,(0,o.zw)(e.title),1)]),(0,a._)("td",I,[e.ico?((0,a.wg)(),(0,a.iD)("span",S,[(0,a._)("i",{class:(0,o.C_)(e.ico)},null,2)])):((0,a.wg)(),(0,a.iD)("span",O,"-"))]),(0,a._)("td",null,(0,o.zw)(e.ctime),1),(0,a._)("td",null,(0,o.zw)(e.utime),1),(0,a._)("td",z,(0,o.zw)(e.sort),1),(0,a._)("td",A,[t.getters.actionShow("perm")&&e.controller&&!e.action?((0,a.wg)(),(0,a.j4)(mt,{key:0,type:"text",textColor:"danger",onClick:l=>t.permData(e.id,e.title,e.controller,e.action)},{default:(0,a.w5)((()=>[R])),_:2},1032,["onClick"])):t.getters.actionShow("perm")&&e.controller&&e.action?((0,a.wg)(),(0,a.j4)(mt,{key:1,type:"text",onClick:l=>t.permData(e.id,e.title,e.controller,e.action)},{default:(0,a.w5)((()=>[B])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.iD)("span",F,"-"))]),(0,a._)("td",null,(0,o.zw)(e.url),1),(0,a._)("td",null,(0,o.zw)(e.controller),1)])))),128))])),_:1},8,["data"]),(0,a.Wm)(ct,{page:t.page.page,limit:t.page.limit,total:t.page.total,"onUpdate:page":t.subPage},null,8,["page","limit","total","onUpdate:page"])])),_:1})])],4),(0,a.Wm)(_t,{title:"添加",width:"540px",show:t.add.show,"onUpdate:show":e[23]||(e[23]=e=>t.add.show=e)},{footer:(0,a.w5)((()=>[(0,a.Wm)(mt,{onClick:e[22]||(e[22]=e=>t.subAdd())},{default:(0,a.w5)((()=>[q])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(wt,null,{default:(0,a.w5)((()=>[(0,a._)("tr",null,[P,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.add.form.fid,"onUpdate:value":e[16]||(e[16]=e=>t.add.form.fid=e),maxlength:"3",maxWidth:"80px",placeholder:"FID"},null,8,["value"])])]),(0,a._)("tr",null,[T,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.add.form.title,"onUpdate:value":e[17]||(e[17]=e=>t.add.form.title=e),maxlength:"8",maxWidth:"320px",placeholder:"菜单名称"},null,8,["value"])])]),(0,a._)("tr",null,[j,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.add.form.controller,"onUpdate:value":e[18]||(e[18]=e=>t.add.form.controller=e),maxlength:"64",placeholder:"例如: /api/test"},null,8,["value"])])]),(0,a._)("tr",null,[J,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.add.form.url,"onUpdate:value":e[19]||(e[19]=e=>t.add.form.url=e),maxlength:"24",maxWidth:"320px",placeholder:"URL"},null,8,["value"])])]),(0,a._)("tr",null,[L,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.add.form.ico,"onUpdate:value":e[20]||(e[20]=e=>t.add.form.ico=e),maxlength:"32",maxWidth:"240px",placeholder:"图标样式"},null,8,["value"])])]),(0,a._)("tr",null,[N,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.add.form.sort,"onUpdate:value":e[21]||(e[21]=e=>t.add.form.sort=e),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])])])),_:1})])),_:1},8,["show"]),(0,a.Wm)(_t,{title:"编辑",width:"540px",show:t.edit.show,"onUpdate:show":e[31]||(e[31]=e=>t.edit.show=e)},{footer:(0,a.w5)((()=>[(0,a.Wm)(mt,{onClick:e[30]||(e[30]=e=>t.subEdit())},{default:(0,a.w5)((()=>[V])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(wt,null,{default:(0,a.w5)((()=>[(0,a._)("tr",null,[E,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.edit.form.fid,"onUpdate:value":e[24]||(e[24]=e=>t.edit.form.fid=e),maxlength:"3",maxWidth:"80px",placeholder:"FID"},null,8,["value"])])]),(0,a._)("tr",null,[H,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.edit.form.title,"onUpdate:value":e[25]||(e[25]=e=>t.edit.form.title=e),maxlength:"8",maxWidth:"320px",placeholder:"菜单名称"},null,8,["value"])])]),(0,a._)("tr",null,[K,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.edit.form.controller,"onUpdate:value":e[26]||(e[26]=e=>t.edit.form.controller=e),maxlength:"64",placeholder:"例如: /api/test"},null,8,["value"])])]),(0,a._)("tr",null,[Y,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.edit.form.url,"onUpdate:value":e[27]||(e[27]=e=>t.edit.form.url=e),maxlength:"24",maxWidth:"320px",placeholder:"URL"},null,8,["value"])])]),(0,a._)("tr",null,[$,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.edit.form.ico,"onUpdate:value":e[28]||(e[28]=e=>t.edit.form.ico=e),maxlength:"32",maxWidth:"240px",placeholder:"图标样式"},null,8,["value"])])]),(0,a._)("tr",null,[M,(0,a._)("td",null,[(0,a.Wm)(st,{value:t.edit.form.sort,"onUpdate:value":e[29]||(e[29]=e=>t.edit.form.sort=e),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])])])),_:1})])),_:1},8,["show"]),(0,a.Wm)(_t,{title:"删除",width:"360px",show:t.del.show,"onUpdate:show":e[33]||(e[33]=e=>t.del.show=e)},{footer:(0,a.w5)((()=>[(0,a.Wm)(mt,{onClick:e[32]||(e[32]=e=>t.subDel())},{default:(0,a.w5)((()=>[Q])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ft,null,{default:(0,a.w5)((()=>[G])),_:1})])),_:1},8,["show"]),(0,a.Wm)(_t,{width:"640px",title:t.perm.title,show:t.perm.show,"onUpdate:show":e[36]||(e[36]=e=>t.perm.show=e)},{footer:(0,a.w5)((()=>[(0,a.Wm)(mt,{onClick:e[35]||(e[35]=e=>t.subPerm())},{default:(0,a.w5)((()=>[ot])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(pt,{isCheckbox:!1},{title:(0,a.w5)((()=>[X,tt,et,(0,a._)("td",lt,[(0,a._)("div",at,[(0,a.Wm)(vt,{onClick:e[34]||(e[34]=e=>t.permAdd())})])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.perm.list,((e,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",null,[(0,a.Wm)(st,{value:e.name,"onUpdate:value":t=>e.name=t},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(st,{value:e.action,"onUpdate:value":t=>e.action=t},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(st,{value:e.perm,"onUpdate:value":t=>e.perm=t},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a._)("div",dt,[(0,a.Wm)(gt,{onClick:e=>t.permRemove(l)},null,8,["onClick"])])])])))),128))])),_:1})])),_:1},8,["title","show"])])}var st=l(3907),nt=l(8907),rt=l(6492),ut=l(5783),mt=l(2367),pt=l(8408),ct=l(6448),ht=l(1566),wt=l(4688),_t=l(4598),ft=l(3098),vt=l(2458),gt=l(5171),bt=l(8306),kt=l(1651),Ut=l(7953),Wt=l(8650),xt=l(1326),yt=(0,a.aZ)({components:{wmSearch:pt.Z,wmMain:ct.Z,wmRow:ht.Z,wmTable:wt.Z,wmTableForm:_t.Z,wmTableOrder:ft.Z,wmCheckbox:vt.Z,wmDialog:gt.Z,wmAdd:bt.Z,wmClose:kt.Z,wmInput:Ut.Z,wmButton:Wt.Z,wmPage:xt.Z},data(){const t=(0,st.oR)(),e=t.state,l=t.getters,a={list:[],page:1,limit:20,total:0},d={show:!1,form:{}},o={name:"",list:{id:"",fid:"",title:"",en:"",ctime:"",utime:"",url:"",controller:""}},i={show:!1,form:{}},s={show:!1,id:"",form:{}},n={show:!1,ids:""},r={show:!1,id:"",title:"权限",list:[]};return{state:e,getters:l,page:a,sea:d,oby:o,add:i,edit:s,del:n,perm:r}},mounted(){mt.Z.getItem("token")&&this.loadData()},methods:{loadData(){this.page.list=[],this.page.total=0;const t=(0,nt.Z)();(0,ut.Z)("api_menus/list",{token:mt.Z.getItem("token"),page:this.page.page,limit:this.page.limit,data:JSON.stringify(this.sea.form),order:this.oby.name},(e=>{t.clear();const l=e.data;if(0!=l.code)return(0,rt.Z)(l.msg);this.page.list=l.list,this.page.total=l.total}))},subPage(t){this.page.page=t,this.loadData()},subSea(){this.page.page=1,this.loadData()},OrderBy(t,e){for(let l in this.oby.list)this.oby.list[l]=l==t?e:"";this.oby.name=e?t+" "+e:"",this.loadData()},subAdd(){this.add.show=!1;const t=JSON.stringify(this.add.form),e=(0,nt.Z)();(0,ut.Z)("api_menus/add",{token:mt.Z.getItem("token"),data:t},(t=>{e.clear();const l=t.data;return 0===l.code&&this.loadData(),(0,rt.Z)(l.msg)}))},editData(){const t=this.$refs.Table,e=t.getRow();if(!e)return(0,rt.Z)("请选择数据!");this.edit.show=!0,this.edit.id=e.id,this.edit.form.fid=e.fid,this.edit.form.title=e.title,this.edit.form.url=e.url,this.edit.form.ico=e.ico,this.edit.form.sort=e.sort,this.edit.form.controller=e.controller},subEdit(){this.edit.show=!1;const t=(0,nt.Z)();(0,ut.Z)("api_menus/edit",{token:mt.Z.getItem("token"),id:this.edit.id,data:JSON.stringify(this.edit.form)},(e=>{t.clear();const l=e.data;return 0===l.code&&this.loadData(),(0,rt.Z)(l.msg)}))},delData(){const t=this.$refs.Table,e=t.getVals();if(!e)return(0,rt.Z)("请选择数据!");this.del.show=!0,this.del.ids=JSON.stringify(e)},subDel(){this.del.show=!1;const t=(0,nt.Z)();(0,ut.Z)("api_menus/del",{token:mt.Z.getItem("token"),data:this.del.ids},(e=>{t.clear();const l=e.data;return 0===l.code&&this.loadData(),(0,rt.Z)(l.msg)}))},permData(t,e,l,a){this.perm.show=!0,this.perm.id=t,this.perm.title=e+": "+l,this.perm.list=a},subPerm(){const t=this.perm.list,e=[];for(let a in t)t[a].action&&t[a].perm&&e.push(t[a]);this.perm.list=e,this.perm.show=!1;const l=(0,nt.Z)();(0,ut.Z)("api_menus/perm",{token:mt.Z.getItem("token"),id:this.perm.id,data:JSON.stringify(e)},(t=>{l.clear();const e=t.data;return 0===e.code&&this.loadData(),(0,rt.Z)(e.msg)}))},permAdd(){const t=this.perm.list,e=t[t.length-1].perm;t.push({name:"",action:"",perm:2*e})},permRemove(t){const e=this.perm.list;e.splice(t,1)}}}),Zt=l(3744);const Dt=(0,Zt.Z)(yt,[["render",it],["__scopeId","data-v-4a14ddd9"]]);var Ct=Dt}}]);