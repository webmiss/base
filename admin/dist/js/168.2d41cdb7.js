"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[168],{6260:function(t,e,n){var i=n(6492);e["Z"]=(t,e)=>{try{let n=plus.camera.getCamera();n.captureImage((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){e.file((e=>{t(e)}))}),(()=>(0,i.Z)("读取拍照失败!")))}),e)}catch(n){const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),document.body.appendChild(e),e.click(),e.onchange=()=>{t(e.files[0])}}}},336:function(t,e,n){n.d(e,{Z:function(){return o}});var i=(t,e,n)=>{let i=e.width||0,o=e.height||0,a=e.cut||!0,r=e.quality||.8,l=e.ext||"jpg";const s={jpg:"image/jpeg",png:"image/png",gif:"image/gif"};let u=1,d=1,c=0,h=0,p=1,g=u/d,f=document.createElement("canvas"),m=f.getContext("2d"),y=new Image;y.src=t,y.onload=function(){const t=this;g=t.width/t.height,i>0&&0==o?(u=i<t.width?i:t.width,d=i<t.width?Math.round(i/g):Math.round(t.width/g),i=u,o=d):0==i&&o>0?(u=o<t.height?Math.round(o*g):Math.round(t.height*g),d=o<t.height?o:t.height,i=u,o=d):0==i&&0==o?(u=t.width,d=t.height,i=u,o=d):(p=i/o,g>p?i<t.width?(u=a?Math.round(o*g):i,d=a?o:Math.round(i/g)):(u=a?Math.round(t.height*g):t.width,d=a?t.height:Math.round(t.width/g)):o<t.height?(u=a?i:Math.round(o*g),d=a?Math.round(i/g):o):(u=a?t.width:Math.round(t.height*g),d=a?Math.round(t.width/g):t.height)),f.width=i,f.height=o,c=Math.round(i-u)/2,h=Math.round(o-d)/2,m.drawImage(this,c,h,u,d);let e=f.toDataURL(s[l],r);n(e)}},o=(t,e,n)=>{try{let o=new plus.io.FileReader;o.readAsDataURL(t),o.onloadend=function(){e.ext||("image/jpeg"==t.type?e.ext="jpg":"image/png"==t.type?e.ext="png":"image/gif"==t.type&&(e.ext="gif")),i(this.result,e,n)}}catch(o){let a=new FileReader;a.readAsDataURL(t),a.onloadend=function(){e.ext||("image/jpeg"==t.type?e.ext="jpg":"image/png"==t.type?e.ext="png":"image/gif"==t.type&&(e.ext="gif")),i(this.result,e,n)}}}},5352:function(t,e,n){n.d(e,{Z:function(){return w}});var i=n(6252),o=n(3577),a=n(9963);const r=t=>((0,i.dD)("data-v-4c97953a"),t=t(),(0,i.Cn)(),t),l={key:0,class:"wm-select_clear_body"},s=r((()=>(0,i._)("i",{class:"ui ui_arrow_down"},null,-1))),u=[s],d=["placeholder","value"],c={key:0,class:"wm-select_body"},h=r((()=>(0,i._)("span",{class:"wm-select_arrow"},null,-1))),p={key:0,class:"wm-select_disabled",style:{cursor:"not-allowed"}},g=["onClick"];function f(t,e,n,r,s,f){return(0,i.wg)(),(0,i.iD)("div",{class:"wm-select",style:(0,o.j5)({width:t.width})},[(0,i._)("div",{class:"wm-select_input",style:(0,o.j5)({height:t.height,lineHeight:t.height}),onClick:e[1]||(e[1]=e=>t.checked=!t.checked)},[t.value&&t.clearable?((0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("span",{class:"wm-select_clear",onClick:e[0]||(e[0]=(0,a.iM)((e=>t.$emit("update:value","")),["stop"]))})])):(0,i.kq)("",!0),(0,i._)("div",{class:"wm-select_input_ico",style:(0,o.j5)({transform:t.checked?"rotate(-180deg)":"rotate(0deg)"})},u,4),(0,i._)("input",{type:"text",readonly:"",placeholder:t.placeholder,value:t.text,style:(0,o.j5)({borderColor:t.checked?"#6FB737":"",boxShadow:t.checked?"0 0 4px rgba(0,0,0,.1)":""})},null,12,d)],4),t.checked?((0,i.wg)(),(0,i.iD)("div",c,[h,(0,i._)("ul",{class:"wm-select_list scrollbar",style:(0,o.j5)({maxHeight:t.maxHeight})},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.dataList,((e,n)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:n},[e.disabled?((0,i.wg)(),(0,i.iD)("li",p,(0,o.zw)(e.label),1)):((0,i.wg)(),(0,i.iD)("li",{key:1,class:(0,o.C_)(e.value==t.value?"wm-select_active":""),onClick:n=>t.selectClick(e.value)},(0,o.zw)(e.label),11,g))],64)))),128))],4)])):(0,i.kq)("",!0)],4)}var m=(0,i.aZ)({name:"Select",props:{value:{default:""},data:{type:Array,default:[]},width:{type:String,default:"100%"},height:{type:String,default:"40px"},placeholder:{type:String,default:"请选择"},maxHeight:{type:String,default:"160px"},clearable:{type:Boolean,default:!1}},data(){const t=!1,e="",n=null;return{checked:t,text:e,dataList:n}},watch:{value(t){this.selectDisplay(t)},data(t){this.dataList=t,this.selectDisplay(this.value)}},mounted(){this.dataList=this.data,this.selectDisplay(this.value);const t=document.getElementsByClassName("wm-select");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(t=>{t.stopPropagation()}));document.addEventListener("click",(()=>{this.checked=!1}))},methods:{selectClick(t){this.checked=!1,this.selectDisplay(t),this.$emit("update:value",t)},selectDisplay(t){const e=this.data;if(""==t)return this.text="";for(let n in e)if(e[n]["value"]==t)return this.text=e[n]["label"]}}}),y=n(3744);const v=(0,y.Z)(m,[["render",f],["__scopeId","data-v-4c97953a"]]);var w=v},2021:function(t,e,n){n.d(e,{Z:function(){return c}});var i=n(6252),o=n(3577);const a=["title"],r={key:1,class:"wm-img_null"};function l(t,e,n,l,s,u){return(0,i.wg)(),(0,i.iD)("div",{ref:"img",class:"wm-img",title:t.title},[t.url?((0,i.wg)(),(0,i.iD)("div",{key:0,style:(0,o.j5)({backgroundImage:"url("+t.url+")",backgroundSize:t.size})},null,4)):((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("i",{class:"ui ui_image",style:(0,o.j5)({fontSize:t.icoSize})},null,4)]))],8,a)}var s=(0,i.aZ)({name:"Img",props:{url:{type:String,default:""},size:{type:String,default:"cover"},width:{type:String,default:"90px"},height:{type:String,default:"40px"},radius:{type:String,default:"0px"},title:{type:String,default:""},icoSize:{type:String,default:"32px"}},mounted(){const t=this.$refs.img;t.style.width=this.width,t.style.height=this.height,t.style.lineHeight=this.height,t.style.borderRadius=this.radius}}),u=n(3744);const d=(0,u.Z)(s,[["render",l],["__scopeId","data-v-58f643d0"]]);var c=d},5451:function(t,e,n){n.d(e,{Z:function(){return g}});var i=n(6252);const o=["title"];function a(t,e,n,a,r,l){return(0,i.wg)(),(0,i.iD)("div",{class:"wm-upload",onClick:e[0]||(e[0]=e=>t.upImage()),title:t.title},[(0,i.WI)(t.$slots,"default",{},void 0,!0)],8,o)}var r=n(8907),l=n(6492),s=n(5783),u=n(6260),d=n(336),c=(0,i.aZ)({name:"ImgUpLoad",props:{url:{type:String,default:""},width:{type:Number,default:200},height:{type:Number,default:200},param:{type:Object,default:{}},title:{type:String,default:"上传图片"}},methods:{upImage(){(0,u.Z)((t=>{(0,d.Z)(t,{width:this.width,height:this.height},(t=>{if(!this.url)return(0,l.Z)("上传Url地址为空!");const e=(0,r.Z)();this.param.base64=t,(0,s.Z)(this.url,this.param,(t=>{e.clear();const n=t.data;return this.$emit("upload",n),(0,l.Z)(n.msg)}))}))}))}}}),h=n(3744);const p=(0,h.Z)(c,[["render",a],["__scopeId","data-v-7b9eb3da"]]);var g=p},229:function(t,e,n){n.d(e,{Z:function(){return d}});var i=n(6252);const o={ref:"SwitchCursor",class:"wm-switch_cursor"};function a(t,e,n,a,r,l){return(0,i.wg)(),(0,i.iD)("span",{ref:"Switch",class:"wm-switch",onClick:e[0]||(e[0]=e=>{t.click()})},[(0,i._)("span",o,null,512)],512)}var r=n(7830),l=(0,i.aZ)({name:"Switch",props:{value:{type:Boolean,default:!1},activeColor:{type:String,default:r.Z.themes.primary.plain[0]},inactiveColor:{type:String,default:r.Z.themes.border.plain[0]}},data(){const t=!1;return{show:t}},watch:{value(t){this.show=t,this.switch()}},mounted(){this.show=this.value,this.switch()},methods:{click(){this.show=!this.show,this.$emit("update:value",this.show),this.switch()},switch(){const t=this.$refs.Switch,e=this.$refs.SwitchCursor;this.show?(t.style.backgroundColor=this.activeColor,e.style.left="18px"):(t.style.backgroundColor=this.inactiveColor,e.style.left="2px")}}}),s=n(3744);const u=(0,s.Z)(l,[["render",a],["__scopeId","data-v-338fe8a4"]]);var d=u},8288:function(t,e,n){n.d(e,{Z:function(){return P}});var i=n(6252);function o(t,e,n,o,a,r){const l=(0,i.up)("editor");return(0,i.wg)(),(0,i.j4)(l,{"api-key":t.key,init:t.defInit,modelValue:t.content,"onUpdate:modelValue":e[0]||(e[0]=e=>t.content=e)},null,8,["api-key","init","modelValue"])}var a=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],r=function(t){return-1!==a.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},l=function(t,e,n){Object.keys(e).filter(r).forEach((function(i){var o=e[i];"function"===typeof o&&("onInit"===i?o(t,n):n.on(i.substring(2),(function(t){return o(t,n)})))}))},s=function(t,e,n,o){var a=t.modelEvents?t.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;(0,i.YP)(o,(function(e,i){n&&"string"===typeof e&&e!==i&&e!==n.getContent({format:t.outputFormat})&&n.setContent(e)})),n.on(r||"change input undo redo",(function(){e.emit("update:modelValue",n.getContent({format:t.outputFormat}))}))},u=function(t,e,n,i,o,a){i.setContent(a()),n.attrs["onUpdate:modelValue"]&&s(e,n,i,o),l(t,n.attrs,i)},d=0,c=function(t){var e=Date.now(),n=Math.floor(1e9*Math.random());return d++,t+"_"+n+d+String(e)},h=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},p=function(t){return"undefined"===typeof t||""===t?[]:Array.isArray(t)?t:t.split(" ")},g=function(t,e){return p(t).concat(p(e))},f=function(t){return null===t||void 0===t},m=function(){return{listeners:[],scriptId:c("tiny-script"),scriptLoaded:!1}},y=function(){var t=m(),e=function(t,e,n,i){var o=e.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=t,o.src=n;var a=function(){o.removeEventListener("load",a),i()};o.addEventListener("load",a),e.head&&e.head.appendChild(o)},n=function(n,i,o){t.scriptLoaded?o():(t.listeners.push(o),n.getElementById(t.scriptId)||e(t.scriptId,n,i,(function(){t.listeners.forEach((function(t){return t()})),t.scriptLoaded=!0})))},i=function(){t=m()};return{load:n,reinitialize:i}},v=y(),w=function(){return"undefined"!==typeof window?window:n.g},b=function(){var t=w();return t&&t.tinymce?t.tinymce:null},S={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},C=n(2262),k=function(){return k=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},k.apply(this,arguments)},_=function(t,e,n,i){return t(i||"div",{id:e,ref:n})},x=function(t,e,n){return t("textarea",{id:e,visibility:"hidden",ref:n})},D=(0,i.aZ)({props:S,setup:function(t,e){var n=t.init?k({},t.init):{},o=(0,C.BK)(t),a=o.disabled,r=o.modelValue,l=o.tagName,s=(0,C.iH)(null),d=null,p=t.id||c("tiny-vue"),m=t.init&&t.init.inline||t.inline,y=!!e.attrs["onUpdate:modelValue"],w=!0,S=t.initialValue?t.initialValue:"",D="",Z=function(t){return y?function(){return(null===r||void 0===r?void 0:r.value)?r.value:""}:function(){return t?S:D}},M=function(){var i=Z(w),o=k(k({},n),{readonly:t.disabled,selector:"#"+p,plugins:g(n.plugins,t.plugins),toolbar:t.toolbar||n.toolbar,inline:m,setup:function(o){d=o,o.on("init",(function(n){return u(n,t,e,o,r,i)})),"function"===typeof n.setup&&n.setup(o)}});h(s.value)&&(s.value.style.visibility=""),b().init(o),w=!1};(0,i.YP)(a,(function(t){var e;null!==d&&("function"===typeof(null===(e=d.mode)||void 0===e?void 0:e.set)?d.mode.set(t?"readonly":"design"):d.setMode(t?"readonly":"design"))})),(0,i.YP)(l,(function(t){var e;y||(D=d.getContent()),null===(e=b())||void 0===e||e.remove(d),(0,i.Y3)((function(){return M()}))})),(0,i.bv)((function(){if(null!==b())M();else if(s.value&&s.value.ownerDocument){var e=t.cloudChannel?t.cloudChannel:"5",n=t.apiKey?t.apiKey:"no-api-key",i=f(t.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+e+"/tinymce.min.js":t.tinymceScriptSrc;v.load(s.value.ownerDocument,i,M)}})),(0,i.Jd)((function(){null!==b()&&b().remove(d)})),m||((0,i.dl)((function(){w||M()})),(0,i.se)((function(){var t;y||(D=d.getContent()),null===(t=b())||void 0===t||t.remove(d)})));var j=function(t){var e;D=d.getContent(),null===(e=b())||void 0===e||e.remove(d),n=k(k({},n),t),(0,i.Y3)((function(){return M()}))};return e.expose({rerender:j}),function(){return m?_(i.h,p,s,t.tagName):x(i.h,p,s)}}}),Z=D,M=n(7830),j=n(6492),I=n(2367),L=n(5783),E=n(336),A=(0,i.aZ)({name:"TinyMCE",components:{Editor:Z},props:{value:{type:String,default:""},upload:{default:{url:"",width:0,height:0,param:{}}},height:{type:Number,default:480},language:{type:String,default:"zh_CN"},menubar:{type:Boolean,default:!1},plugins:{type:String,default:"advlist autolink lists link image charmap print preview anchor searchreplace visualblocks code fullscreen insertdatetime media table paste code help wordcount"},toolbar:{type:String,default:"undo redo | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist | table image media | removeformat | preview help"}},data(){const t=M.Z.tinymceKey,e="",n={language:this.language,width:"100%",height:this.height,menubar:this.menubar,branding:!1,elementpath:!1,plugins:this.plugins,toolbar:this.toolbar,toolbar_items_size:"small",images_upload_handler:(t,e,n)=>{this.upImg(t,e,n)},content_style:"img {max-width:100%;}"};return{key:t,content:e,defInit:n}},watch:{value(t){this.content=t},content(t){this.$emit("update:value",t)}},mounted(){},methods:{upImg(t,e,n){if(""==this.upload.url)return(0,j.Z)("无上传地址!");const i=t.blob();(0,E.Z)(i,{width:this.upload.width,height:this.upload.height},(t=>{const i={token:I.Z.getItem("token"),base64:t},o=this.upload.param||{};for(let e in o)i[e]=o[e];(0,L.Z)(this.upload.url,i,(t=>{const n=t.data;return 0==n.code?e(n.img):e(""),(0,j.Z)(n.msg)}),n)}))}}}),B=n(3744);const U=(0,B.Z)(A,[["render",o],["__scopeId","data-v-208fa616"]]);var P=U}}]);