"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[822],{2693:function(e,t,l){l.d(t,{Z:function(){return A}});var a=l(6252),i=l(3577),s=l(9963);const d=e=>((0,a.dD)("data-v-51a346fa"),e=e(),(0,a.Cn)(),e),n={key:0,class:"wm-cascader_clear_body"},r=d((()=>(0,a._)("i",{class:"ui ui_arrow_down"},null,-1))),c=[r],o=["placeholder","value"],h={key:0,class:"wm-cascader_body flex"},u=d((()=>(0,a._)("span",{class:"wm-cascader_arrow"},null,-1))),m=d((()=>(0,a._)("li",null,"暂无数据",-1))),w=[m],p={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},k={key:0,class:"ui ui_arrow_right"},_=["onClick"],g={key:0,class:"ui ui_arrow_right"},f={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},v={key:0,class:"ui ui_arrow_right"},y=["onClick"],b={key:0,class:"ui ui_arrow_right"},x={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},W={key:0,class:"ui ui_arrow_right"},D=["onClick"],C={key:0,class:"ui ui_arrow_right"},Z={key:0,class:"wm-cascader_disabled",style:{cursor:"not-allowed"}},U={key:0,class:"ui ui_arrow_right"},S=["onClick"],L={key:0,class:"ui ui_arrow_right"};function H(e,t,l,d,r,m){return(0,a.wg)(),(0,a.iD)("div",{class:"wm-cascader",style:(0,i.j5)({width:e.width})},[(0,a._)("div",{class:"wm-cascader_input",style:(0,i.j5)({height:e.height,lineHeight:e.height}),onClick:t[1]||(t[1]=t=>e.show=!e.show)},[e.value.length>0&&e.clearable?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("span",{class:"wm-cascader_clear",onClick:t[0]||(t[0]=(0,s.iM)((t=>e.clear()),["stop"]))})])):(0,a.kq)("",!0),(0,a._)("div",{class:"wm-cascader_input_ico",style:(0,i.j5)({transform:e.show?"rotate(-180deg)":"rotate(0deg)"})},c,4),(0,a._)("input",{type:"text",readonly:"",placeholder:e.placeholder,value:e.text,style:(0,i.j5)({borderColor:e.show?"#6FB737":"",boxShadow:e.show?"0 0 4px rgba(0,0,0,.1)":""})},null,12,o)],4),e.show?((0,a.wg)(),(0,a.iD)("div",h,[u,0==e.dataList.length?((0,a.wg)(),(0,a.iD)("ul",{key:0,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},w,4)):((0,a.wg)(),(0,a.iD)("ul",{key:1,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[t.disabled?((0,a.wg)(),(0,a.iD)("li",p,[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",k)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(t.checked?"wm-cascader_active":""),onClick:(0,s.iM)((t=>e.selectClick("1",[l,-1,-1,-1])),["stop"])},[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",g)):(0,a.kq)("",!0)],10,_))],64)))),128))],4)),e.k1>=0&&e.dataList[e.k1].children?((0,a.wg)(),(0,a.iD)("ul",{key:2,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList[e.k1].children,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[t.disabled?((0,a.wg)(),(0,a.iD)("li",f,[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",v)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(t.checked?"wm-cascader_active":""),onClick:t=>e.selectClick("2",[e.k1,l,-1,-1])},[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",b)):(0,a.kq)("",!0)],10,y))],64)))),128))],4)):(0,a.kq)("",!0),e.k2>=0&&e.dataList[e.k1].children[e.k2].children?((0,a.wg)(),(0,a.iD)("ul",{key:3,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList[e.k1].children[e.k2].children,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[t.disabled?((0,a.wg)(),(0,a.iD)("li",x,[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",W)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(t.checked?"wm-cascader_active":""),onClick:t=>e.selectClick("3",[e.k1,e.k2,l,-1])},[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",C)):(0,a.kq)("",!0)],10,D))],64)))),128))],4)):(0,a.kq)("",!0),e.k3>=0&&e.dataList[e.k1].children[e.k2].children[e.k3].children?((0,a.wg)(),(0,a.iD)("ul",{key:4,class:"wm-cascader_list scrollbar",style:(0,i.j5)({width:e.maxWidth,maxHeight:e.maxHeight})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.dataList[e.k1].children[e.k2].children[e.k3].children,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[t.disabled?((0,a.wg)(),(0,a.iD)("li",Z,[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",U)):(0,a.kq)("",!0)])):((0,a.wg)(),(0,a.iD)("li",{key:1,class:(0,i.C_)(t.checked?"wm-cascader_active":""),onClick:t=>e.selectClick("4",[e.k1,e.k2,e.k3,l])},[(0,a._)("span",null,(0,i.zw)(t.label),1),t.children?((0,a.wg)(),(0,a.iD)("i",L)):(0,a.kq)("",!0)],10,S))],64)))),128))],4)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],4)}const I=(e,t)=>t.split(e),z=(e,t="\\s")=>{const l=new RegExp("("+t+"*$)","gi");return e.replace(l,"")};var q=(0,a.aZ)({name:"Cascader",props:{value:{type:Array,default:[]},data:{type:Array,default:[]},width:{type:String,default:"100%"},height:{type:String,default:"40px"},placeholder:{type:String,default:"请选择"},maxWidth:{type:String,default:"180px"},maxHeight:{type:String,default:"180px"},clearable:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1}},data(){const e=!1,t="",l=[],a=null;let i=-1,s=-1,d=-1,n=-1;return{show:e,text:t,keys:l,dataList:a,k1:i,k2:s,k3:d,k4:n}},watch:{value(e){const t=e.length;t>0&&(this.k1=e[0],this.selectChechked(e[0],this.dataList)),t>1&&(this.k2=e[1],this.selectChechked(e[1],this.dataList[e[0]].children)),t>2&&(this.k3=e[2],this.selectChechked(e[2],this.dataList[e[0]].children[e[1]].children)),t>3&&(this.k4=e[3],this.selectChechked(e[3],this.dataList[e[0]].children[e[1]].children[e[2]].children)),this.getValue()},data(e){this.dataList=e}},mounted(){this.dataList=this.data;const e=document.getElementsByClassName("wm-cascader");for(let t=0;t<e.length;t++)e[t].addEventListener("click",(e=>{e.stopPropagation()}));document.addEventListener("click",(()=>{this.show=!1}))},methods:{selectClick(e,t){this.k1=t[0],this.k2=t[1],this.k3=t[2],this.k4=t[3];const l=this.dataList;"1"==e?this.selectRouter(this.k1,l):"2"==e?this.selectRouter(this.k2,l[this.k1].children):"3"==e?this.selectRouter(this.k3,l[this.k1].children[this.k2].children):"4"==e&&this.selectRouter(this.k4,l[this.k1].children[this.k2].children[this.k3].children)},selectRouter(e,t){for(let l in t)l==e?(t[l].checked=!0,this.checkStrictly?t[e].children&&this.selectClear(t[e].children):t[e].children||(this.show=!1),this.getValue(),setTimeout((()=>{this.$emit("update:value",this.keys)}),400)):(t[l].checked=!1,t[l].children&&this.selectClear(t[l].children))},selectChechked(e,t){for(let l in t)t[l].checked=l==e},selectClear(e){for(let t in e)e[t].checked=!1,e[t].children&&this.selectClear(e[t].children)},getValue(){let e=this.selectValue(this.dataList);this.text=z(e.label,"/"),e.key&&(this.keys=I("/",z(e.key,"/")))},selectValue(e){let t="",l="",a="",i={};for(let s in e)if(e[s].checked){t=s,l=e[s].label,a=e[s].value,e[s].children&&(i=this.selectValue(e[s].children),t+="/"+i["key"],l+="/"+i["label"],a+="/"+i["value"]);break}return{key:t,label:l,value:a}},clear(){this.k1=-1,this.k2=-1,this.k3=-1,this.k4=-1,this.text="",this.$emit("update:value",[]),this.selectClear(this.dataList)}}}),R=l(3744);const j=(0,R.Z)(q,[["render",H],["__scopeId","data-v-51a346fa"]]);var A=j},8570:function(e,t,l){l.r(t),l.d(t,{default:function(){return ye}});var a=l(6252),i=l(9963),s=l(3577);const d=e=>((0,a.dD)("data-v-5c287a70"),e=e(),(0,a.Cn)(),e),n={class:"flex"},r={class:"app_ct_left"},c={class:"app_sea_title flex"},o=d((()=>(0,a._)("h2",null,"搜索",-1))),h=d((()=>(0,a._)("i",{class:"ui ui_arrow_left"},null,-1))),u=[h],m={class:"app_sea_form"},w={class:"input"},p={class:"app_sea_sub"},k=(0,a.Uk)("搜 索"),_={class:"app_action_body flex_left"},g=d((()=>(0,a._)("i",{class:"ui ui_search"},null,-1))),f=[g],v={class:"app_action_list flex_left"},y={class:"app_ct_body"},b=d((()=>(0,a._)("td",{width:"40"},"ID",-1))),x=d((()=>(0,a._)("td",{width:"40"},"FID",-1))),W=d((()=>(0,a._)("td",null,"名称",-1))),D=d((()=>(0,a._)("td",null,"英文",-1))),C=d((()=>(0,a._)("td",{width:"40",class:"tCenter"},"图标",-1))),Z=d((()=>(0,a._)("td",{width:"140"},"创建时间",-1))),U=d((()=>(0,a._)("td",{width:"140"},"更新时间",-1))),S=d((()=>(0,a._)("td",{width:"60",class:"tCenter"},"排序",-1))),L=d((()=>(0,a._)("td",{width:"60",class:"tCenter"},"权限",-1))),H=d((()=>(0,a._)("td",null,"URL",-1))),I=d((()=>(0,a._)("td",null,"API",-1))),z={width:"30",class:"checkbox wm-table_checkbox"},q={class:"tCenter"},R={key:0,class:"menus_icon"},j={key:1},A={class:"tCenter"},F={class:"tCenter"},P=(0,a.Uk)("设置"),Y=(0,a.Uk)("编辑"),K={key:2},M=(0,a.Uk)("添 加"),V=(0,a.Uk)("保 存"),E=(0,a.Uk)("是否删除已选择数据？"),N=(0,a.Uk)("彻底删除"),B=d((()=>(0,a._)("td",null,"名称",-1))),J=d((()=>(0,a._)("td",null,"动作",-1))),O=d((()=>(0,a._)("td",{width:"100"},"权限",-1))),T={width:"30"},$={class:"perm_an"},G={class:"perm_an"},Q=(0,a.Uk)("更 新");function X(e,t,l,d,h,g){const X=(0,a.up)("wm-input"),ee=(0,a.up)("wm-button"),te=(0,a.up)("wm-checkbox"),le=(0,a.up)("wm-table"),ae=(0,a.up)("wm-page"),ie=(0,a.up)("wm-main"),se=(0,a.up)("wm-cascader"),de=(0,a.up)("wm-form-item"),ne=(0,a.up)("wm-form"),re=(0,a.up)("wm-dialog"),ce=(0,a.up)("wm-row"),oe=(0,a.up)("wm-add"),he=(0,a.up)("wm-close");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.wy)((0,a._)("div",r,[(0,a._)("div",c,[o,(0,a._)("span",{onClick:t[0]||(t[0]=t=>e.state.menuSea=!1)},u)]),(0,a._)("ul",m,[(0,a._)("li",null,[(0,a.Wm)(X,{value:e.sea.form.fid,"onUpdate:value":t[1]||(t[1]=t=>e.sea.form.fid=t),placeholder:"FID"},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(X,{value:e.sea.form.title,"onUpdate:value":t[2]||(t[2]=t=>e.sea.form.title=t),placeholder:"菜单名称"},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(X,{value:e.sea.form.en,"onUpdate:value":t[3]||(t[3]=t=>e.sea.form.en=t),placeholder:"英文名称"},null,8,["value"])]),(0,a._)("li",null,[(0,a._)("div",w,[(0,a.Wm)(X,{value:e.sea.form.url,"onUpdate:value":t[4]||(t[4]=t=>e.sea.form.url=t),placeholder:"API关键字"},null,8,["value"])])])]),(0,a._)("div",p,[(0,a.Wm)(ee,{onClick:t[5]||(t[5]=t=>e.subSea()),height:"32px"},{default:(0,a.w5)((()=>[k])),_:1})])],512),[[i.F8,e.state.menuSea]]),(0,a._)("div",{class:"app_ct_right",style:(0,s.j5)({width:e.state.menuSea?"calc(100% - 240px)":"100%"})},[(0,a._)("div",_,[(0,a.wy)((0,a._)("div",{class:"app_action_sea",onClick:t[6]||(t[6]=t=>e.state.menuSea=!0)},f,512),[[i.F8,!e.state.menuSea]]),(0,a._)("ul",v,[e.getters.actionShow("add")?((0,a.wg)(),(0,a.iD)("li",{key:0,onClick:t[7]||(t[7]=t=>e.add.show=!0)},"添加")):(0,a.kq)("",!0),e.getters.actionShow("edit")?((0,a.wg)(),(0,a.iD)("li",{key:1,onClick:t[8]||(t[8]=t=>e.editData())},"编辑")):(0,a.kq)("",!0),e.getters.actionShow("del")?((0,a.wg)(),(0,a.iD)("li",{key:2,onClick:t[9]||(t[9]=t=>e.delData())},"删除")):(0,a.kq)("",!0)])]),(0,a._)("div",y,[(0,a.Wm)(ie,null,{default:(0,a.w5)((()=>[(0,a.Wm)(le,{ref:"Table",data:e.page.list,style:{"min-width":"1200px"}},{title:(0,a.w5)((()=>[b,x,W,D,C,Z,U,S,L,H,I])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.page.list,((t,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",z,[(0,a.Wm)(te,{value:t.id},null,8,["value"])]),(0,a._)("td",null,(0,s.zw)(t.id),1),(0,a._)("td",null,(0,s.zw)(t.fid),1),(0,a._)("td",null,[(0,a._)("b",null,(0,s.zw)(t.title),1)]),(0,a._)("td",null,(0,s.zw)(t.en),1),(0,a._)("td",q,[t.ico?((0,a.wg)(),(0,a.iD)("span",R,[(0,a._)("i",{class:(0,s.C_)(t.ico)},null,2)])):((0,a.wg)(),(0,a.iD)("span",j,"-"))]),(0,a._)("td",null,(0,s.zw)(t.ctime),1),(0,a._)("td",null,(0,s.zw)(t.utime),1),(0,a._)("td",A,(0,s.zw)(t.sort),1),(0,a._)("td",F,[e.getters.actionShow("perm")&&t.controller&&!t.action?((0,a.wg)(),(0,a.j4)(ee,{key:0,type:"text",textColor:"danger",onClick:l=>e.permData(t.id,t.title,t.controller,t.action)},{default:(0,a.w5)((()=>[P])),_:2},1032,["onClick"])):e.getters.actionShow("perm")&&t.controller&&t.action?((0,a.wg)(),(0,a.j4)(ee,{key:1,type:"text",onClick:l=>e.permData(t.id,t.title,t.controller,t.action)},{default:(0,a.w5)((()=>[Y])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.iD)("span",K,"-"))]),(0,a._)("td",null,(0,s.zw)(t.url),1),(0,a._)("td",null,(0,s.zw)(t.controller),1)])))),128))])),_:1},8,["data"]),(0,a.Wm)(ae,{page:e.page.page,limit:e.page.limit,total:e.page.total,"onUpdate:page":e.subPage},null,8,["page","limit","total","onUpdate:page"])])),_:1})])],4),(0,a.Wm)(re,{title:"添加",width:"700px",show:e.add.show,"onUpdate:close":t[18]||(t[18]=t=>e.add.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(ee,{onClick:t[17]||(t[17]=t=>e.subAdd())},{default:(0,a.w5)((()=>[M])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ne,{class:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{label:"所属"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{width:"240px",value:e.menus.value,"onUpdate:value":t[10]||(t[10]=t=>e.menus.value=t),data:e.menus.data,checkStrictly:"",clearable:""},null,8,["value","data"])])),_:1}),(0,a.Wm)(de,{label:"名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.add.form.title,"onUpdate:value":t[11]||(t[11]=t=>e.add.form.title=t),maxlength:"8",maxWidth:"80%",placeholder:"菜单名称",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"英文"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.add.form.en,"onUpdate:value":t[12]||(t[12]=t=>e.add.form.en=t),maxlength:"16",maxWidth:"80%",placeholder:"英文名称",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"URL"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.add.form.url,"onUpdate:value":t[13]||(t[13]=t=>e.add.form.url=t),maxlength:"24",maxWidth:"80%",placeholder:"URL",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"API"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.add.form.controller,"onUpdate:value":t[14]||(t[14]=t=>e.add.form.controller=t),maxlength:"64",maxWidth:"80%",placeholder:"例如: /admin/sys_menus",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"图标样式"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.add.form.ico,"onUpdate:value":t[15]||(t[15]=t=>e.add.form.ico=t),maxlength:"32",maxWidth:"80%",placeholder:"图标样式",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.add.form.sort,"onUpdate:value":t[16]||(t[16]=t=>e.add.form.sort=t),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["show"]),(0,a.Wm)(re,{title:"编辑",width:"700px",show:e.edit.show,"onUpdate:close":t[27]||(t[27]=t=>e.edit.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(ee,{onClick:t[26]||(t[26]=t=>e.subEdit())},{default:(0,a.w5)((()=>[V])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ne,{class:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{label:"所属"},{default:(0,a.w5)((()=>[(0,a.Wm)(se,{width:"240px",value:e.menus.value,"onUpdate:value":t[19]||(t[19]=t=>e.menus.value=t),data:e.menus.data,checkStrictly:"",clearable:""},null,8,["value","data"])])),_:1}),(0,a.Wm)(de,{label:"名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.edit.form.title,"onUpdate:value":t[20]||(t[20]=t=>e.edit.form.title=t),maxlength:"8",maxWidth:"80%",placeholder:"菜单名称",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"英文"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.edit.form.en,"onUpdate:value":t[21]||(t[21]=t=>e.edit.form.en=t),maxlength:"16",maxWidth:"80%",placeholder:"英文名称",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"URL"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.edit.form.url,"onUpdate:value":t[22]||(t[22]=t=>e.edit.form.url=t),maxlength:"24",maxWidth:"80%",placeholder:"URL",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"API"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.edit.form.controller,"onUpdate:value":t[23]||(t[23]=t=>e.edit.form.controller=t),maxlength:"64",maxWidth:"80%",placeholder:"例如: /admin/sys_menus",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"图标样式"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.edit.form.ico,"onUpdate:value":t[24]||(t[24]=t=>e.edit.form.ico=t),maxlength:"32",maxWidth:"80%",placeholder:"图标样式",clearable:""},null,8,["value"])])),_:1}),(0,a.Wm)(de,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{value:e.edit.form.sort,"onUpdate:value":t[25]||(t[25]=t=>e.edit.form.sort=t),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["show"]),(0,a.Wm)(re,{title:"删除",width:"320px",show:e.del.show,"onUpdate:close":t[29]||(t[29]=t=>e.del.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(ee,{onClick:t[28]||(t[28]=t=>e.subDel())},{default:(0,a.w5)((()=>[N])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ce,null,{default:(0,a.w5)((()=>[E])),_:1})])),_:1},8,["show"]),(0,a.Wm)(re,{width:"640px",title:e.perm.title,show:e.perm.show,"onUpdate:close":t[32]||(t[32]=t=>e.perm.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(ee,{onClick:t[31]||(t[31]=t=>e.subPerm())},{default:(0,a.w5)((()=>[Q])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(le,{isCheckbox:!1},{title:(0,a.w5)((()=>[B,J,O,(0,a._)("td",T,[(0,a._)("div",$,[(0,a.Wm)(oe,{onClick:t[30]||(t[30]=t=>e.permAdd())})])])])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.perm.list,((t,l)=>((0,a.wg)(),(0,a.iD)("tr",{key:l},[(0,a._)("td",null,[(0,a.Wm)(X,{value:t.name,"onUpdate:value":e=>t.name=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(X,{value:t.action,"onUpdate:value":e=>t.action=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(X,{value:t.perm,"onUpdate:value":e=>t.perm=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a._)("div",G,[(0,a.Wm)(he,{onClick:t=>e.permRemove(l)},null,8,["onClick"])])])])))),128))])),_:1})])),_:1},8,["title","show"])])}var ee=l(3907),te=l(8907),le=l(6492),ae=l(5783),ie=l(2367),se=l(6448),de=l(1566),ne=l(4688),re=l(2458),ce=l(3351),oe=l(8306),he=l(1651),ue=l(6675),me=l(7685),we=l(7953),pe=l(8650),ke=l(2693),_e=l(1326),ge=(0,a.aZ)({components:{wmMain:se.Z,wmRow:de.Z,wmTable:ne.Z,wmCheckbox:re.Z,wmDialog:ce.Z,wmAdd:oe.Z,wmClose:he.Z,wmForm:ue.Z,wmFormItem:me.Z,wmInput:we.Z,wmButton:pe.Z,wmCascader:ke.Z,wmPage:_e.Z},data(){const e=(0,ee.oR)(),t=e.state,l=e.getters,a={list:[],page:1,limit:20,total:0},i={show:!1,form:{}},s={show:!1,form:{}},d={show:!1,id:"",form:{}},n={show:!1,ids:""},r={show:!1,id:"",title:"权限",list:[]};let c=[];const o={value:[],data:[]};return{state:t,getters:l,page:a,sea:i,add:s,edit:d,del:n,perm:r,keys:c,menus:o}},mounted(){ie.Z.getItem("token")&&(this.loadData(),this.getMenus())},methods:{loadData(){this.page.list=[],this.page.total=0;const e=(0,te.Z)();(0,ae.Z)("sys_menus/list",{token:ie.Z.getItem("token"),page:this.page.page,limit:this.page.limit,data:JSON.stringify(this.sea.form)},(t=>{e.clear();const l=t.data;if(0!=l.code)return(0,le.Z)(l.msg);this.page.list=l.list,this.page.total=l.total}))},subPage(e){this.page.page=e,this.loadData()},subSea(){this.page.page=1,this.loadData()},verify(e){return!e.title||e.title.length<2?"名称大于2个字符":""},subAdd(){const e=this.add.form;e.fid=this.getFid();let t=this.verify(e);if(t)return(0,le.Z)(t);this.add.show=!1;const l=(0,te.Z)();(0,ae.Z)("sys_menus/add",{token:ie.Z.getItem("token"),data:JSON.stringify(e)},(e=>{l.clear();const t=e.data;return 0===t.code&&(this.loadData(),this.getMenus()),(0,le.Z)(t.msg)}))},editData(){const e=this.$refs.Table,t=e.getRow();if(!t)return(0,le.Z)("请选择数据!");this.edit.show=!0,this.edit.id=t.id,this.edit.form.fid=t.fid,this.edit.form.title=t.title,this.edit.form.en=t.en,this.edit.form.url=t.url,this.edit.form.ico=t.ico,this.edit.form.sort=t.sort,this.edit.form.controller=t.controller,this.editKeys()},editKeys(){const e=this.edit.form.fid,t=this.menus.data;let l=[];if(0!=e)for(let a in t){if(e==t[a].value){l=[a];break}if(t[a].children)for(let i in t[a].children){if(e==t[a].children[i].value){l=[a,i];break}if(t[a].children[i].children)for(let s in t[a].children[i].children){if(e==t[a].children[i].children[s].value){l=[a,i,s];break}if(t[a].children[i].children[s].children)for(let d in t[a].children[i].children[s].children)if(e==t[a].children[i].children[s].children[d].value){l=[a,i,s,d];break}}}}this.menus.value=l},subEdit(){const e=this.edit.form;e.fid=this.getFid();let t=this.verify(e);if(t)return(0,le.Z)(t);this.edit.show=!1;const l=(0,te.Z)();(0,ae.Z)("sys_menus/edit",{token:ie.Z.getItem("token"),id:this.edit.id,data:JSON.stringify(e)},(e=>{l.clear();const t=e.data;return 0===t.code&&(this.loadData(),this.getMenus()),(0,le.Z)(t.msg)}))},delData(){const e=this.$refs.Table,t=e.getVals();if(!t)return(0,le.Z)("请选择数据!");this.del.show=!0,this.del.ids=JSON.stringify(t)},subDel(){this.del.show=!1;const e=(0,te.Z)();(0,ae.Z)("sys_menus/del",{token:ie.Z.getItem("token"),data:this.del.ids},(t=>{e.clear();const l=t.data;return 0===l.code&&this.loadData(),(0,le.Z)(l.msg)}))},getMenus(){(0,ae.Z)("sys_menus/getMenusAll",{token:ie.Z.getItem("token"),data:this.del.ids},(e=>{const t=e.data;0===t.code&&(this.menus.data=t.menus)}))},getFid(){let e=0;const t=this.menus.value,l=t.length,a=this.menus.data;return 1==l&&(e=a[t[0]].value),2==l&&(e=a[t[0]].children[t[1]].value),3==l&&(e=a[t[0]].children[t[1]].children[t[2]].value),4==l&&(e=a[t[0]].children[t[1]].children[t[2]].children[t[3]].value),e},permData(e,t,l,a){this.perm.show=!0,this.perm.id=e,this.perm.title=t+": "+l,this.perm.list=a},subPerm(){const e=this.perm.list,t=[];for(let a in e)e[a].action&&e[a].perm&&t.push(e[a]);this.perm.list=t,this.perm.show=!1;const l=(0,te.Z)();(0,ae.Z)("sys_menus/perm",{token:ie.Z.getItem("token"),id:this.perm.id,data:JSON.stringify(t)},(e=>{l.clear();const t=e.data;return 0===t.code&&this.loadData(),(0,le.Z)(t.msg)}))},permAdd(){const e=this.perm.list;e.length>0?e.push({name:"",action:"",perm:2*e[e.length-1].perm}):this.perm.list=[{name:"",action:"",perm:1}]},permRemove(e){const t=this.perm.list;t.splice(e,1)}}}),fe=l(3744);const ve=(0,fe.Z)(ge,[["render",X],["__scopeId","data-v-5c287a70"]]);var ye=ve}}]);