"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[746],{6260:function(t,e,a){var n=a(6492);e["Z"]=(t,e)=>{try{let a=plus.camera.getCamera();a.captureImage((function(e){plus.io.resolveLocalFileSystemURL(e,(function(e){e.file((e=>{t(e)}))}),(()=>(0,n.Z)("读取拍照失败!")))}),e)}catch(a){const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","display: none"),document.body.appendChild(e),e.click(),e.onchange=()=>{t(e.files[0])}}}},336:function(t,e,a){a.d(e,{Z:function(){return i}});var n=(t,e,a)=>{let n=e.width||0,i=e.height||0,l=e.cut||!0,r=e.quality||.8,d=e.ext||"jpg";const o={jpg:"image/jpeg",png:"image/png",gif:"image/gif"};let u=1,m=1,s=0,h=0,g=1,p=u/m,c=document.createElement("canvas"),f=c.getContext("2d"),w=new Image;w.src=t,w.onload=function(){const t=this;p=t.width/t.height,n>0&&0==i?(u=n<t.width?n:t.width,m=n<t.width?Math.round(n/p):Math.round(t.width/p),n=u,i=m):0==n&&i>0?(u=i<t.height?Math.round(i*p):Math.round(t.height*p),m=i<t.height?i:t.height,n=u,i=m):0==n&&0==i?(u=t.width,m=t.height,n=u,i=m):(g=n/i,p>g?n<t.width?(u=l?Math.round(i*p):n,m=l?i:Math.round(n/p)):(u=l?Math.round(t.height*p):t.width,m=l?t.height:Math.round(t.width/p)):i<t.height?(u=l?n:Math.round(i*p),m=l?Math.round(n/p):i):(u=l?t.width:Math.round(t.height*p),m=l?Math.round(t.width/p):t.height)),c.width=n,c.height=i,s=Math.round(n-u)/2,h=Math.round(i-m)/2,f.drawImage(this,s,h,u,m);let e=c.toDataURL(o[d],r);a(e)}},i=(t,e,a)=>{try{let i=new plus.io.FileReader;i.readAsDataURL(t),i.onloadend=function(){e.ext||("image/jpeg"==t.type?e.ext="jpg":"image/png"==t.type?e.ext="png":"image/gif"==t.type&&(e.ext="gif")),n(this.result,e,a)}}catch(i){let l=new FileReader;l.readAsDataURL(t),l.onloadend=function(){e.ext||("image/jpeg"==t.type?e.ext="jpg":"image/png"==t.type?e.ext="png":"image/gif"==t.type&&(e.ext="gif")),n(this.result,e,a)}}}},1003:function(t,e,a){a.d(e,{Z:function(){return p}});var n=a(6252),i=a(3577);const l=t=>((0,n.dD)("data-v-dd03b520"),t=t(),(0,n.Cn)(),t),r={class:"wm-date_body"},d=l((()=>(0,n._)("div",{class:"wm-date_arrow bottom"},null,-1)));function o(t,e,a,l,o,u){const m=(0,n.up)("wm-input");return(0,n.wg)(),(0,n.iD)("div",{class:"wm-date",style:(0,i.j5)({width:t.width})},[(0,n.Wm)(m,{value:t.value,"onUpdate:value":e[0]||(e[0]=e=>t.value=e),placeholder:t.placeholder},null,8,["value","placeholder"]),(0,n._)("div",r,[d,(0,n._)("div",{class:"wm-date_ct",onClick:e[1]||(e[1]=e=>t.getDate())},"暂不更新,点击获取今天")])],4)}var u=a(6173),m=(t=0,e)=>{const a=e?new Date(e):new Date;a.setDate(a.getDate()+t);const n=""+a.getFullYear(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):""+(a.getMonth()+1),l=a.getDate()<10?"0"+a.getDate():""+a.getDate();return n+"-"+i+"-"+l},s=(0,n.aZ)({name:"Date",components:{wmInput:u.Z},props:{value:{type:String,default:""},width:{type:String,default:"160px"},placeholder:{type:String,default:"选择日期"}},mounted(){},methods:{getDate(){const t=m(0);this.$emit("update:value",t)}}}),h=a(3744);const g=(0,h.Z)(s,[["render",o],["__scopeId","data-v-dd03b520"]]);var p=g},6675:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(6252);const i={ref:"form"};function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.WI)(t.$slots,"default")],512)}var r=(0,n.aZ)({name:"Form",props:{labelWidth:{type:String,default:"90px"},labelHeight:{type:String,default:"40px"}},mounted(){this.init()},methods:{init(){const t=this.$refs.form,e=t.getElementsByTagName("label");t.getElementsByClassName("wm-form_item_body");for(let a=0;a<e.length;a++)e[a].style.width=this.labelWidth,e[a].style.height=this.labelHeight}}}),d=a(3744);const o=(0,d.Z)(r,[["render",l]]);var u=o},7685:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(6252),i=a(3577);function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",{class:"wm-form_item",style:(0,i.j5)({margin:t.margin})},["none"!=t.label?((0,n.wg)(),(0,n.iD)("label",{key:0,class:"wm-form_item_label",style:(0,i.j5)({height:t.height})},(0,i.zw)(t.label),5)):(0,n.kq)("",!0),(0,n._)("div",{class:"wm-form_item_body",style:(0,i.j5)({height:t.height})},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],4)],4)}var r=(0,n.aZ)({name:"FormItem",props:{type:{type:String,default:"label"},label:{type:String,default:""},height:{type:String,default:"40px"}},data(){const t="";return{margin:t}},mounted(){"label"==this.type?this.margin="8px 0":"botton"==this.type&&(this.margin="24px 0")}}),d=a(3744);const o=(0,d.Z)(r,[["render",l],["__scopeId","data-v-20c2801c"]]);var u=o},3530:function(t,e,a){a.d(e,{Z:function(){return s}});var n=a(6252),i=a(3577);const l=["onClick"],r={class:"name"};function d(t,e,a,d,o,u){return(0,n.wg)(),(0,n.iD)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{class:"wm-radio_item",key:a,onClick:a=>t.$emit("update:value",e.value)},[(0,n._)("div",{class:(0,i.C_)(["checked",e.value==t.value?"active":""])},null,2),(0,n._)("div",r,(0,i.zw)(e.label),1)],8,l)))),128))])}var o=(0,n.aZ)({name:"Radio",props:{value:{type:String,default:""},data:{type:Array,default:[]}},methods:{}}),u=a(3744);const m=(0,u.Z)(o,[["render",d],["__scopeId","data-v-3940f950"]]);var s=m},4429:function(t,e,a){a.d(e,{Z:function(){return s}});var n=a(6252),i=a(3577);const l=["title"],r={key:1,class:"wm-img_null"};function d(t,e,a,d,o,u){return(0,n.wg)(),(0,n.iD)("div",{ref:"img",class:"wm-img",title:t.title},[t.url?((0,n.wg)(),(0,n.iD)("div",{key:0,style:(0,i.j5)({backgroundImage:"url("+t.url+")",backgroundSize:t.size})},null,4)):((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("i",{class:"ui ui_img",style:(0,i.j5)({fontSize:t.icoSize})},null,4)]))],8,l)}var o=(0,n.aZ)({name:"Img",props:{url:{type:String,default:""},size:{type:String,default:"cover"},width:{type:String,default:"90px"},height:{type:String,default:"40px"},radius:{type:String,default:"0px"},title:{type:String,default:""},icoSize:{type:String,default:"32px"}},mounted(){const t=this.$refs.img;t.style.width=this.width,t.style.height=this.height,t.style.lineHeight=this.height,t.style.borderRadius=this.radius}}),u=a(3744);const m=(0,u.Z)(o,[["render",d],["__scopeId","data-v-b8669030"]]);var s=m},5451:function(t,e,a){a.d(e,{Z:function(){return p}});var n=a(6252);const i=["title"];function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",{class:"wm-upload",onClick:e[0]||(e[0]=e=>t.upImage()),title:t.title},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],8,i)}var r=a(8907),d=a(6492),o=a(5783),u=a(6260),m=a(336),s=(0,n.aZ)({name:"ImgUpLoad",props:{url:{type:String,default:""},width:{type:Number,default:200},height:{type:Number,default:200},param:{type:Object,default:{}},title:{type:String,default:"上传图片"}},methods:{upImage(){(0,u.Z)((t=>{(0,m.Z)(t,{width:this.width,height:this.height},(t=>{if(!this.url)return(0,d.Z)("上传Url地址为空!");const e=(0,r.Z)();this.param.base64=t,(0,o.Z)(this.url,this.param,(t=>{e.clear();const a=t.data;return this.$emit("upload",a),(0,d.Z)(a.msg)}))}))}))}}}),h=a(3744);const g=(0,h.Z)(s,[["render",l],["__scopeId","data-v-7b9eb3da"]]);var p=g},5219:function(t,e,a){a.d(e,{Z:function(){return u}});var n=a(6252),i=a(3577);function l(t,e,a,l,r,d){return(0,n.wg)(),(0,n.iD)("div",{class:"wm-main scrollbar",style:(0,i.j5)({width:"calc(100% - "+2*t.padding+"px)",height:"calc(100% - "+2*t.padding+"px)",padding:t.padding+"px"})},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],4)}var r=(0,n.aZ)({name:"Main",props:{padding:{type:Number,default:10}}}),d=a(3744);const o=(0,d.Z)(r,[["render",l],["__scopeId","data-v-af90e5fa"]]);var u=o},5746:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var n=a(6252);const i=(0,n.Uk)("保存设置");function l(t,e,a,l,r,d){const o=(0,n.up)("wm-img"),u=(0,n.up)("wm-img-upload"),m=(0,n.up)("wm-form-item"),s=(0,n.up)("wm-input"),h=(0,n.up)("wm-radio"),g=(0,n.up)("wm-date"),p=(0,n.up)("wm-button"),c=(0,n.up)("wm-form"),f=(0,n.up)("wm-main");return(0,n.wg)(),(0,n.j4)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"max_width"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{label:"头像",height:"auto"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{url:t.upload.url,param:t.upload.param,onUpload:t.upImg},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{width:"80px",height:"80px",radius:"50%",url:t.form.img},null,8,["url"])])),_:1},8,["url","param","onUpload"])])),_:1}),(0,n.Wm)(m,{label:"昵称"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.nickname,"onUpdate:value":e[0]||(e[0]=e=>t.form.nickname=e),maxlength:"12",placeholder:"用户昵称"},null,8,["value"])])),_:1}),(0,n.Wm)(m,{label:"姓名"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.name,"onUpdate:value":e[1]||(e[1]=e=>t.form.name=e),maxlength:"8",placeholder:"填写姓名"},null,8,["value"])])),_:1}),(0,n.Wm)(m,{label:"性别"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{data:t.gender,value:t.form.gender,"onUpdate:value":e[2]||(e[2]=e=>t.form.gender=e)},null,8,["data","value"])])),_:1}),(0,n.Wm)(m,{label:"生日"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{value:t.form.birthday,"onUpdate:value":e[3]||(e[3]=e=>t.form.birthday=e)},null,8,["value"])])),_:1}),(0,n.Wm)(m,{label:"职务"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{value:t.form.position,"onUpdate:value":e[4]||(e[4]=e=>t.form.position=e),maxlength:"8",placeholder:"职务、职称"},null,8,["value"])])),_:1}),(0,n.Wm)(m,{type:"botton"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{onClick:e[5]||(e[5]=e=>t.onSubmit())},{default:(0,n.w5)((()=>[i])),_:1})])),_:1})])),_:1})])),_:1})}var r=a(3907),d=a(8907),o=a(6492),u=a(5783),m=a(2367),s=a(5219),h=a(6675),g=a(7685),p=a(6173),c=a(3530),f=a(1003),w=a(3331),v=a(4429),y=a(5451),b=(0,n.aZ)({components:{wmMain:s.Z,wmForm:h.Z,wmFormItem:g.Z,wmInput:p.Z,wmRadio:c.Z,wmDate:f.Z,wmButton:w.Z,wmImg:v.Z,wmImgUpload:y.Z},data(){const t=(0,r.oR)(),e=t.state,a={img:"",nickname:"",name:"",gender:"男",birthday:"",position:""},n=[{label:"男",value:"男"},{label:"女",value:"女"}],i={url:"user_info/upimg",param:{token:m.Z.getItem("token")}};return{state:e,form:a,gender:n,upload:i}},mounted(){m.Z.getItem("token")&&this.loadData()},methods:{loadData(){const t=(0,d.Z)();(0,u.Z)("user_info/list",{token:m.Z.getItem("token")},(e=>{t.clear();const a=e.data;if(0!=a.code)return(0,o.Z)(a.msg);this.form=a.list}),(()=>{(0,o.Z)("网络加载失败!")}))},onSubmit(){const t=JSON.stringify(this.form),e=(0,d.Z)();(0,u.Z)("user_info/edit",{token:m.Z.getItem("token"),data:t},(t=>{e.clear();const a=t.data;return 0==a.code&&(this.state.uInfo=a.uinfo),(0,o.Z)(a.msg)}))},upImg(t){return 0==t.code&&(this.form.img=t.img,this.state.uInfo.img=t.img),(0,o.Z)(t.msg)}}}),Z=a(3744);const _=(0,Z.Z)(b,[["render",l],["__scopeId","data-v-d3f930a2"]]);var I=_}}]);