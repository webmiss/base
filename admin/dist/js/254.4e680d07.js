"use strict";(self["webpackChunkwebmis_vue"]=self["webpackChunkwebmis_vue"]||[]).push([[254],{8306:function(e,t,l){l.d(t,{Z:function(){return r}});var a=l(6252),o=l(3577);function i(e,t,l,i,d,n){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_add",style:(0,o.j5)({padding:e.size,backgroundColor:e.bgColor})},null,4)}var d=l(7830),n=(0,a.aZ)({name:"ActionAdd",props:{size:{type:String,default:"11px"},bgColor:{type:String,default:d.Z.themes.primary.plain[0]}}}),s=l(3744);const m=(0,s.Z)(n,[["render",i],["__scopeId","data-v-48dabb4f"]]);var r=m},1651:function(e,t,l){l.d(t,{Z:function(){return r}});var a=l(6252),o=l(3577);function i(e,t,l,i,d,n){return(0,a.wg)(),(0,a.iD)("span",{class:"wm-action_close",style:(0,o.j5)({padding:e.size,backgroundColor:e.bgColor})},null,4)}var d=l(7830),n=(0,a.aZ)({name:"ActionClose",props:{size:{type:String,default:"11px"},bgColor:{type:String,default:d.Z.themes.danger.plain[0]}}}),s=l(3744);const m=(0,s.Z)(n,[["render",i],["__scopeId","data-v-88899c5c"]]);var r=m},7040:function(e,t,l){l.r(t),l.d(t,{default:function(){return ve}});var a=l(6252),o=l(9963),i=l(3577);const d=e=>((0,a.dD)("data-v-1742042e"),e=e(),(0,a.Cn)(),e),n={class:"flex"},s={class:"app_ct_left"},m={class:"app_sea_title flex"},r=d((()=>(0,a._)("h2",null,"搜索",-1))),u=d((()=>(0,a._)("i",{class:"icons icon_arrow_left"},null,-1))),p=[u],c={class:"app_sea_form"},w={class:"input"},h={class:"app_sea_sub"},f=(0,a.Uk)("搜 索"),_={class:"app_action_body flex_left"},g=d((()=>(0,a._)("i",{class:"icons icon_search"},null,-1))),v=[g],W={class:"app_action_list flex_left"},k={class:"app_ct_body"},b=d((()=>(0,a._)("td",{width:"40"},"ID",-1))),x=d((()=>(0,a._)("td",{width:"40"},"FID",-1))),Z=d((()=>(0,a._)("td",{width:"120"},"名称",-1))),U=d((()=>(0,a._)("td",{width:"80"},"权限",-1))),D=d((()=>(0,a._)("td",{width:"40"},"图标",-1))),y=d((()=>(0,a._)("td",{width:"60",style:{"text-align":"center"}},"排序",-1))),C=d((()=>(0,a._)("td",{width:"120"},"URL",-1))),S=d((()=>(0,a._)("td",null,"API",-1))),I={style:{"text-align":"center"}},z=(0,a.Uk)("设置"),A=(0,a.Uk)("动作"),R={key:2},T={style:{"text-align":"center"}},F={key:0,class:"menus_icon"},P={key:1},j={style:{"text-align":"center"}},J=(0,a.Uk)("添 加"),L=(0,a.Uk)("保 存"),N=(0,a.Uk)("是否删除已选择数据？"),O=(0,a.Uk)("彻底删除"),q=d((()=>(0,a._)("td",null,"名称",-1))),E=d((()=>(0,a._)("td",null,"动作",-1))),H=d((()=>(0,a._)("td",{width:"100"},"权限",-1))),K={width:"30"},Y={class:"perm_an"},$={class:"perm_an"},B=(0,a.Uk)("更 新");function M(e,t,l,d,u,g){const M=(0,a.up)("wm-input"),V=(0,a.up)("wm-button"),G=(0,a.up)("wm-table-title"),Q=(0,a.up)("wm-tag"),X=(0,a.up)("wm-popover"),ee=(0,a.up)("wm-table-tr"),te=(0,a.up)("wm-table"),le=(0,a.up)("wm-page"),ae=(0,a.up)("wm-main"),oe=(0,a.up)("wm-form-item"),ie=(0,a.up)("wm-form"),de=(0,a.up)("wm-dialog"),ne=(0,a.up)("wm-row"),se=(0,a.up)("wm-add"),me=(0,a.up)("wm-close");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.wy)((0,a._)("div",s,[(0,a._)("div",m,[r,(0,a._)("span",{onClick:t[0]||(t[0]=t=>e.state.menuSea=!1)},p)]),(0,a._)("ul",c,[(0,a._)("li",null,[(0,a.Wm)(M,{value:e.sea.form.fid,"onUpdate:value":t[1]||(t[1]=t=>e.sea.form.fid=t),placeholder:"FID"},null,8,["value"])]),(0,a._)("li",null,[(0,a.Wm)(M,{value:e.sea.form.title,"onUpdate:value":t[2]||(t[2]=t=>e.sea.form.title=t),placeholder:"菜单名称"},null,8,["value"])]),(0,a._)("li",null,[(0,a._)("div",w,[(0,a.Wm)(M,{value:e.sea.form.url,"onUpdate:value":t[3]||(t[3]=t=>e.sea.form.url=t),placeholder:"API关键字"},null,8,["value"])])])]),(0,a._)("div",h,[(0,a.Wm)(V,{onClick:t[4]||(t[4]=t=>e.subSea()),height:"32px"},{default:(0,a.w5)((()=>[f])),_:1})])],512),[[o.F8,e.state.menuSea]]),(0,a._)("div",{class:"app_ct_right",style:(0,i.j5)({width:e.state.menuSea?"calc(100% - 240px)":"100%"})},[(0,a._)("div",_,[(0,a.wy)((0,a._)("div",{class:"app_action_sea",onClick:t[5]||(t[5]=t=>e.state.menuSea=!0)},v,512),[[o.F8,!e.state.menuSea]]),(0,a._)("ul",W,[e.getters.actionShow("add")?((0,a.wg)(),(0,a.iD)("li",{key:0,onClick:t[6]||(t[6]=t=>e.add.show=!0)},"添加")):(0,a.kq)("",!0),e.getters.actionShow("edit")?((0,a.wg)(),(0,a.iD)("li",{key:1,onClick:t[7]||(t[7]=t=>e.editData())},"编辑")):(0,a.kq)("",!0),e.getters.actionShow("del")?((0,a.wg)(),(0,a.iD)("li",{key:2,onClick:t[8]||(t[8]=t=>e.delData())},"删除")):(0,a.kq)("",!0)])]),(0,a._)("div",k,[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)(te,{class:"table",ref:"Table",data:e.page.list},{default:(0,a.w5)((()=>[(0,a.Wm)(G,null,{default:(0,a.w5)((()=>[b,x,Z,U,D,y,C,S])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.page.list,((t,l)=>((0,a.wg)(),(0,a.j4)(ee,{key:l,value:t.id+""},{default:(0,a.w5)((()=>[(0,a._)("td",null,(0,i.zw)(t.id),1),(0,a._)("td",null,(0,i.zw)(t.fid),1),(0,a._)("td",null,[(0,a.Wm)(X,{type:"bottom",effect:"dark",width:"180px"},{body:(0,a.w5)((()=>[(0,a._)("p",null,"创建: "+(0,i.zw)(t.ctime||"无"),1),(0,a._)("p",null,"更新: "+(0,i.zw)(t.utime||"无"),1)])),reference:(0,a.w5)((()=>[(0,a.Wm)(Q,{size:"medium"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(t.title),1)])),_:2},1024)])),_:2},1024)]),(0,a._)("td",I,[e.getters.actionShow("perm")&&t.controller&&!t.action?((0,a.wg)(),(0,a.j4)(V,{key:0,type:"danger",height:"32px",onClick:l=>e.permData(t.id,t.title,t.controller,t.action)},{default:(0,a.w5)((()=>[z])),_:2},1032,["onClick"])):e.getters.actionShow("perm")&&t.controller&&t.action?((0,a.wg)(),(0,a.j4)(V,{key:1,height:"32px",onClick:l=>e.permData(t.id,t.title,t.controller,t.action)},{default:(0,a.w5)((()=>[A])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.iD)("span",R,"-"))]),(0,a._)("td",T,[t.ico?((0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("i",{class:(0,i.C_)(t.ico)},null,2)])):((0,a.wg)(),(0,a.iD)("span",P,"-"))]),(0,a._)("td",j,(0,i.zw)(t.sort),1),(0,a._)("td",null,(0,i.zw)(t.url),1),(0,a._)("td",null,(0,i.zw)(t.controller),1)])),_:2},1032,["value"])))),128))])),_:1},8,["data"]),(0,a.Wm)(le,{page:e.page.page,limit:e.page.limit,total:e.page.total,"onUpdate:page":e.subPage},null,8,["page","limit","total","onUpdate:page"])])),_:1})])],4),(0,a.Wm)(de,{title:"添加",width:"540px",show:e.add.show,"onUpdate:close":t[16]||(t[16]=t=>e.add.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:t[15]||(t[15]=t=>e.subAdd())},{default:(0,a.w5)((()=>[J])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ie,{class:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{label:"所属"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.add.form.fid,"onUpdate:value":t[9]||(t[9]=t=>e.add.form.fid=t),maxlength:"3",maxWidth:"80px",placeholder:"FID"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.add.form.title,"onUpdate:value":t[10]||(t[10]=t=>e.add.form.title=t),maxlength:"8",maxWidth:"320px",placeholder:"菜单名称"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"控制器"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.add.form.controller,"onUpdate:value":t[11]||(t[11]=t=>e.add.form.controller=t),maxlength:"2",placeholder:"例如: /api/test"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"URL"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.add.form.url,"onUpdate:value":t[12]||(t[12]=t=>e.add.form.url=t),maxlength:"24",maxWidth:"320px",placeholder:"URL"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"图标样式"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.add.form.ico,"onUpdate:value":t[13]||(t[13]=t=>e.add.form.ico=t),maxlength:"32",maxWidth:"240px",placeholder:"图标样式"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.add.form.sort,"onUpdate:value":t[14]||(t[14]=t=>e.add.form.sort=t),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["show"]),(0,a.Wm)(de,{title:"编辑",width:"540px",show:e.edit.show,"onUpdate:close":t[24]||(t[24]=t=>e.edit.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:t[23]||(t[23]=t=>e.subEdit())},{default:(0,a.w5)((()=>[L])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ie,{class:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{label:"所属"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.edit.form.fid,"onUpdate:value":t[17]||(t[17]=t=>e.edit.form.fid=t),maxlength:"3",maxWidth:"80px",placeholder:"FID"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.edit.form.title,"onUpdate:value":t[18]||(t[18]=t=>e.edit.form.title=t),maxlength:"8",maxWidth:"320px",placeholder:"菜单名称"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"控制器"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.edit.form.controller,"onUpdate:value":t[19]||(t[19]=t=>e.edit.form.controller=t),maxlength:"2",placeholder:"例如: /api/test"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"URL"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.edit.form.url,"onUpdate:value":t[20]||(t[20]=t=>e.edit.form.url=t),maxlength:"24",maxWidth:"320px",placeholder:"URL"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"图标样式"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.edit.form.ico,"onUpdate:value":t[21]||(t[21]=t=>e.edit.form.ico=t),maxlength:"32",maxWidth:"240px",placeholder:"图标样式"},null,8,["value"])])),_:1}),(0,a.Wm)(oe,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{value:e.edit.form.sort,"onUpdate:value":t[22]||(t[22]=t=>e.edit.form.sort=t),maxlength:"2",maxWidth:"240px",placeholder:"例如: 1、2、3"},null,8,["value"])])),_:1})])),_:1})])),_:1},8,["show"]),(0,a.Wm)(de,{title:"删除",width:"320px",show:e.del.show,"onUpdate:close":t[26]||(t[26]=t=>e.del.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:t[25]||(t[25]=t=>e.subDel())},{default:(0,a.w5)((()=>[O])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(ne,null,{default:(0,a.w5)((()=>[N])),_:1})])),_:1},8,["show"]),(0,a.Wm)(de,{width:"640px",title:e.perm.title,show:e.perm.show,"onUpdate:close":t[29]||(t[29]=t=>e.perm.show=t)},{footer:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:t[28]||(t[28]=t=>e.subPerm())},{default:(0,a.w5)((()=>[B])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{checkbox:!1},{default:(0,a.w5)((()=>[q,E,H,(0,a._)("td",K,[(0,a._)("div",Y,[(0,a.Wm)(se,{onClick:t[27]||(t[27]=t=>e.permAdd())})])])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.perm.list,((t,l)=>((0,a.wg)(),(0,a.j4)(ee,{checkbox:!1,key:l},{default:(0,a.w5)((()=>[(0,a._)("td",null,[(0,a.Wm)(M,{value:t.name,"onUpdate:value":e=>t.name=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(M,{value:t.action,"onUpdate:value":e=>t.action=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a.Wm)(M,{value:t.perm,"onUpdate:value":e=>t.perm=e},null,8,["value","onUpdate:value"])]),(0,a._)("td",null,[(0,a._)("div",$,[(0,a.Wm)(me,{onClick:t=>e.permRemove(l)},null,8,["onClick"])])])])),_:2},1024)))),128))])),_:1})])),_:1},8,["title","show"])])}var V=l(3907),G=l(8907),Q=l(6492),X=l(5783),ee=l(2367),te=l(5262),le=l(1566),ae=l(8298),oe=l(9504),ie=l(9876),de=l(5488),ne=l(5342),se=l(7491),me=l(8306),re=l(1651),ue=l(6675),pe=l(7685),ce=l(6173),we=l(3331),he=l(8896),fe=(0,a.aZ)({components:{wmMain:te.Z,wmRow:le.Z,wmTable:ae.Z,wmTableTitle:oe.Z,wmTableTr:ie.Z,wmTag:de.Z,wmPopover:ne.Z,wmDialog:se.Z,wmAdd:me.Z,wmClose:re.Z,wmForm:ue.Z,wmFormItem:pe.Z,wmInput:ce.Z,wmButton:we.Z,wmPage:he.Z},data(){const e=(0,V.oR)(),t=e.state,l=e.getters,a={list:[],page:1,limit:10,total:0},o={show:!1,form:{}},i={show:!1,form:{}},d={show:!1,id:"",form:{}},n={show:!1,ids:""},s={show:!1,id:"",title:"权限",list:[]};return{state:t,getters:l,page:a,sea:o,add:i,edit:d,del:n,perm:s}},mounted(){ee.Z.getItem("token")&&this.loadData()},methods:{loadData(){this.page.list=[],this.page.total=0;const e=(0,G.Z)();(0,X.Z)("api_menus/list",{token:ee.Z.getItem("token"),page:this.page.page,limit:this.page.limit,data:JSON.stringify(this.sea.form)},(t=>{e.clear();const l=t.data;if(0!=l.code)return(0,Q.Z)(l.msg);this.page.list=l.list,this.page.total=l.total}))},subPage(e){this.page.page=e,this.loadData()},subSea(){this.page.page=1,this.loadData()},subAdd(){this.add.show=!1;const e=JSON.stringify(this.add.form),t=(0,G.Z)();(0,X.Z)("api_menus/add",{token:ee.Z.getItem("token"),data:e},(e=>{t.clear();const l=e.data;return 0===l.code&&this.loadData(),(0,Q.Z)(l.msg)}))},editData(){const e=this.$refs.Table,t=e.getRow();if(!t)return(0,Q.Z)("请选择数据!");this.edit.show=!0,this.edit.id=t.id,this.edit.form.fid=t.fid,this.edit.form.title=t.title,this.edit.form.url=t.url,this.edit.form.ico=t.ico,this.edit.form.sort=t.sort,this.edit.form.controller=t.controller},subEdit(){this.edit.show=!1;const e=(0,G.Z)();(0,X.Z)("api_menus/edit",{token:ee.Z.getItem("token"),id:this.edit.id,data:JSON.stringify(this.edit.form)},(t=>{e.clear();const l=t.data;return 0===l.code&&this.loadData(),(0,Q.Z)(l.msg)}))},delData(){const e=this.$refs.Table,t=e.getVals();if(!t)return(0,Q.Z)("请选择数据!");this.del.show=!0,this.del.ids=JSON.stringify(t)},subDel(){this.del.show=!1;const e=(0,G.Z)();(0,X.Z)("api_menus/del",{token:ee.Z.getItem("token"),data:this.del.ids},(t=>{e.clear();const l=t.data;return 0===l.code&&this.loadData(),(0,Q.Z)(l.msg)}))},permData(e,t,l,a){this.perm.show=!0,this.perm.id=e,this.perm.title=t+": "+l,this.perm.list=a},subPerm(){const e=this.perm.list,t=[];for(let a in e)e[a].action&&e[a].perm&&t.push(e[a]);this.perm.list=t,this.perm.show=!1;const l=(0,G.Z)();(0,X.Z)("api_menus/perm",{token:ee.Z.getItem("token"),id:this.perm.id,data:JSON.stringify(t)},(e=>{l.clear();const t=e.data;return 0===t.code&&this.loadData(),(0,Q.Z)(t.msg)}))},permAdd(){const e=this.perm.list,t=e[e.length-1].perm;e.push({name:"",action:"",perm:2*t})},permRemove(e){const t=this.perm.list;t.splice(e,1)}}}),_e=l(3744);const ge=(0,_e.Z)(fe,[["render",M],["__scopeId","data-v-1742042e"]]);var ve=ge}}]);